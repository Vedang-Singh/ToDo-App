(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{"./bundles/sf-contextmenu.js":function(e,t,n){"use strict";n.r(t);n("./modules/sf-contextmenu.js")},"./modules/sf-contextmenu.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ContextMenu=function(){"use strict";var e="e-menu-item",t=function(){function t(e,t,n,s){this.wrapper=e,this.target=t,this.filter=n,this.dotnetRef=s,this.wrapper.blazor__instance=this,this.subMenuOpen=!1,this.openAsMenu=!1,this.addContextMenuEvent(),sf.base.EventHandler.add(this.wrapper,"keydown",this.keyDownHandler,this)}return t.prototype.addContextMenuEvent=function(e){var t;if(void 0===e&&(e=!0),this.target){var n=sf.base.selectAll(this.target);if(n.length){for(var s=0,i=n.length;s<i;s++)if(t=n[s],e)sf.base.Browser.isIos?new sf.base.Touch(t,{tapHold:this.touchHandler.bind(this)}):sf.base.EventHandler.add(t,"contextmenu",this.cmenuHandler,this);else if(sf.base.Browser.isIos){var r=sf.base.getInstance(t,sf.base.Touch);r&&r.destroy()}else sf.base.EventHandler.remove(t,"contextmenu",this.cmenuHandler);if(sf.base.isNullOrUndefined(this.targetElement)&&(this.targetElement=t),e){sf.base.EventHandler.add(this.targetElement,"scroll",this.scrollHandler,this);for(var o=0,a=sf.popups.getScrollableParent(this.targetElement);o<a.length;o++){var l=a[o];sf.base.EventHandler.add(l,"scroll",this.scrollHandler,this)}}else{var d=void 0;this.targetElement.parentElement?(sf.base.EventHandler.remove(this.targetElement,"scroll",this.scrollHandler),d=sf.popups.getScrollableParent(this.targetElement)):d=sf.popups.getScrollableParent(t);for(var c=0,u=d;c<u.length;c++){var h=u[c];sf.base.EventHandler.remove(h,"scroll",this.scrollHandler)}this.targetElement=null}}}},t.prototype.scrollHandler=function(e){this.wrapper.childElementCount&&this.dotnetRef.invokeMethodAsync("CloseMenu",e)},t.prototype.touchHandler=function(e){this.cmenuHandler(e.originalEvent)},t.prototype.keyDownHandler=function(t){if(t.preventDefault(),40===t.keyCode||38===t.keyCode){var n=void 0,s=void 0,i=void 0;t.target.classList.contains("e-menu-parent")?((i=(s=t.target).querySelector("."+e+".e-focused"))?(n=Array.prototype.indexOf.call(s.children,i),n=40===t.keyCode?n===s.childElementCount-1?0:n+1:0===n?s.childElementCount-1:n-1):n=0,n=this.isValidLI(s,0,40===t.keyCode)):t.target.classList.contains(e)&&(i=(s=t.target.parentElement).querySelector("."+e+".e-focused"),n=Array.prototype.indexOf.call(s.children,i||t.target),n=40===t.keyCode?n===s.childElementCount-1?0:n+1:0===n?s.childElementCount-1:n-1,n=this.isValidLI(s,n,40===t.keyCode)),s&&-1!==n&&s.children[n].focus()}else if(((this.wrapper.classList.contains("e-rtl")?39===t.keyCode:37===t.keyCode)||27===t.keyCode)&&(t.target.classList.contains("e-ul")||t.target.classList.contains(e)&&!t.target.parentElement.classList.contains("e-contextmenu"))){var r=(s=t.target.classList.contains("e-ul")?t.target:t.target.parentElement).previousElementSibling.querySelector("."+e+".e-selected");r&&r.focus()}},t.prototype.isValidLI=function(e,t,n,s){void 0===s&&(s=0);var i=e.children[t];return s===e.childElementCount?-1:((i.classList.contains("e-separator")||i.classList.contains("e-disabled")||i.classList.contains("e-menu-hide"))&&(t=n?t===e.childElementCount-1?0:t+1:0===t?e.childElementCount-1:t-1,s++),((i=e.children[t]).classList.contains("e-separator")||i.classList.contains("e-disabled")||i.classList.contains("e-menu-hide"))&&(t=this.isValidLI(e,t,n)),t)},t.prototype.cmenuHandler=function(e){if(this.filter){for(var t=!1,n=this.filter.split(" "),s=0,i=n.length;s<i;s++)if(sf.base.closest(e.target,n[s])){t=!0;break}if(!t)return}e.preventDefault();var r=e.changedTouches?e.changedTouches[0].pageX:e.pageX,o=e.changedTouches?e.changedTouches[0].pageY:e.pageY;this.dotnetRef.invokeMethodAsync("OpenContextMenu",Math.ceil(r),Math.ceil(o),e)},t.prototype.contextMenuPosition=function(e,t,n,s){this.removeEventListener();var i=this.wrapper.firstElementChild;if(!i)return{Left:0,Top:0,ZIndex:0,Width:0};var r=null;null===e&&null===t?this.openAsMenu=!0:(this.openAsMenu=!1,this.wrapper.parentElement!==document.body&&document.body.appendChild(this.wrapper),r=sf.popups.getZindexPartial(this.wrapper)),i.style.visibility="hidden",i.classList.remove("e-transparent");var o=i.getBoundingClientRect(),a=this.getMenuWidth(i,o.width,n);if(s&&sf.base.Browser.isDevice)return i.classList.add("e-transparent"),i.style.visibility="",{Width:Math.ceil(a)};var l=this.wrapper.getBoundingClientRect();if(null!=t){if(t-pageYOffset+o.height>document.documentElement.clientHeight){var d=document.documentElement.clientHeight-o.height-20;d>document.documentElement.clientTop&&(t=d+pageYOffset)}t-=l.top+pageYOffset,t=Math.ceil(t+1)}if(null!=e){if(e-pageXOffset+a>document.documentElement.clientWidth){var c=document.documentElement.clientWidth-a-20;c>document.documentElement.clientLeft&&(e=c+pageYOffset)}e-=l.left+pageXOffset,e=Math.ceil(e+1)}return i.classList.add("e-transparent"),null!=t&&(this.wrapper.style.top=t+"px"),null!=e&&(this.wrapper.style.left=e+"px"),i.style.visibility="",i.focus(),sf.base.EventHandler.add(document,"mousedown touchstart",this.mouseDownHandler,this),sf.base.EventHandler.add(document,"mouseover",this.mouseOverHandler,this),{Left:e,Top:t,ZIndex:r,Width:Math.ceil(a)}},t.prototype.getMenuWidth=function(e,t,n){var s=e.getElementsByClassName("e-caret")[0];return s&&(t+=parseInt(getComputedStyle(s)[n?"marginRight":"marginLeft"],10)),t<120?120:t},t.prototype.removeEventListener=function(){sf.base.EventHandler.remove(document,"mousedown touchstart",this.mouseDownHandler),sf.base.EventHandler.remove(document,"mouseover",this.mouseOverHandler)},t.prototype.mouseDownHandler=function(e){this.wrapper.childElementCount?sf.base.closest(e.target,"#"+this.wrapper.id)||this.dotnetRef.invokeMethodAsync("CloseMenu",e):this.removeEventListener()},t.prototype.mouseOverHandler=function(e){if(this.wrapper.childElementCount){this.subMenuOpen&&this.wrapper.childElementCount>1&&(sf.base.closest(e.target,"#"+this.wrapper.id)||this.dotnetRef.invokeMethodAsync("CloseSubMenu",e));var t=document.activeElement;if(!sf.base.closest(t,"#"+this.wrapper.id)&&this.wrapper.childElementCount){this.openAsMenu&&(this.openAsMenu=!1,sf.base.EventHandler.remove(document,"mouseover",this.mouseOverHandler));var n=this.wrapper.lastElementChild;n&&n.focus()}}else this.removeEventListener()},t.prototype.subMenuPosition=function(t,n){if(!this.wrapper.childElementCount||this.wrapper.childElementCount<2)return{Left:0,Top:0,Width:0};var s=this.wrapper.children[this.wrapper.childElementCount-2].querySelector("."+e+".e-selected").getBoundingClientRect(),i=this.wrapper.getBoundingClientRect(),r=this.wrapper.lastElementChild;r.style.visibility="hidden",r.classList.remove("e-transparent");var o,a,l=r.getBoundingClientRect(),d=this.getMenuWidth(r,l.width,t);t?(a=parseInt(getComputedStyle(r).borderWidth,10),o=s.left-d-i.left):o=s.right-i.left;var c=s.top-i.top;r.classList.add("e-transparent"),r.style.visibility="";var u=r.querySelector("."+e+".e-focused");if(u?u.focus():r.focus(),t)s.left-a-d<document.documentElement.clientLeft&&s.right+d<document.documentElement.clientWidth&&(o=s.right-i.left);else if(s.right+d>document.documentElement.clientWidth){var h=s.left-d;h>document.documentElement.clientLeft&&(o=h-i.left)}if(s.top+l.height>document.documentElement.clientHeight){var p=document.documentElement.clientHeight-l.height-20;p>document.documentElement.clientTop&&(c=p-i.top)}return this.subMenuOpen=!n,{Left:Math.ceil(o),Top:Math.ceil(c),Width:Math.ceil(d)}},t.prototype.onPropertyChanged=function(e,t){switch(e){case"Target":this.addContextMenuEvent(!1),this.target=t,this.addContextMenuEvent();break;case"Filter":this.filter=t}},t.prototype.destroy=function(e){this.removeEventListener(),this.addContextMenuEvent(!1),e&&e.parentElement&&e.previousElementSibling!==this.wrapper&&e.parentElement.insertBefore(this.wrapper,e),e&&e.parentElement||!this.wrapper.parentElement||this.wrapper.parentElement!==document.body||document.body.removeChild(this.wrapper)},t}();return{initialize:function(e,n,s,i){return e&&new t(e,n,s,i),sf.base.Browser.isDevice},contextMenuPosition:function(e,t,n,s,i){return e.blazor__instance.contextMenuPosition(t,n,s,i)},subMenuPosition:function(e,t,n){return e.blazor__instance.subMenuPosition(t,n)},onPropertyChanged:function(e,t,n){e.blazor__instance.onPropertyChanged(t,n)},destroy:function(e,t){e.blazor__instance.destroy(t)}}}()}}]);