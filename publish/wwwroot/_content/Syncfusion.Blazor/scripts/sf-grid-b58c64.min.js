(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{"./bundles/sf-grid.js":function(e,t,n){"use strict";n.r(t);n("./modules/sf-grid.js")},"./modules/sf-grid.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Grid=function(){"use strict";var e,t=null;function n(){if(null!==t)return t;var e,n=document.createElement("div");return n.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(n),e=n.offsetWidth-n.clientWidth|0,document.body.removeChild(n),t=e}function o(e,t){for(var n=e[t+"ElementSibling"],o=0,r=["e-gridheader","e-gridfooter","e-groupdroparea","e-gridpager","e-toolbar"];n;)r.some((function(e){return n.classList.contains(e)}))&&(o+=n.offsetHeight),n=n[t+"ElementSibling"];return o}function r(e,t,n){for(var o=e;o&&!(n?o.id===t:o.classList.contains(t));)o=o.parentElement;return o}function i(e,t){for(var n=-1,o=0,r=t.length;o<r;o++)if(t[o].isEqualNode(e)){n=o;break}return n}function s(e,t){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1}function l(e){var t={};return t.x=sf.base.isNullOrUndefined(e.clientX)?e.changedTouches[0].clientX:e.clientX,t.y=sf.base.isNullOrUndefined(e.clientY)?e.changedTouches[0].clientY:e.clientY,t}function a(e,t){for(var n=[],o=0,r=e.length;o<r;o++){var i=t(e[o],o);sf.base.isNullOrUndefined(i)||n.push(i)}return n}function d(e){var t=e.querySelector("#"+e.id+"EditConfirm");return e.querySelectorAll(".e-updatedtd").length&&(!t||t.classList.contains("e-popup-close"))}function h(e){return e.options.enableVirtualization&&e.options.groupCount>0&&(e.options.offline||""===e.options.url)}function p(e,t){for(var n=[].slice.call(e.querySelectorAll(t)),o=0;o<n.length;o++)sf.base.remove(n[o])}function c(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];for(var r=0,i=e.length;r<i;r++)t?(sf.base.classList(e[r],n.slice(),[]),e[r].setAttribute("aria-selected","true")):(sf.base.classList(e[r],[],n.slice()),e[r].removeAttribute("aria-selected"))}var u=function(){function e(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.addEventListener(),this.setHeight(),this.setPadding()}return e.prototype.setHeight=function(){var e=0,t=this.parent.element.querySelector(".e-content");if(this.parent.options.frozenRows&&"auto"!==this.parent.options.height){var n=this.parent.element.querySelector(".e-headercontent").querySelector("tbody");e=n?n.offsetHeight:0,t.style.height=sf.base.formatUnit(parseInt(this.parent.options.height)-e)}},e.prototype.setPadding=function(){if("auto"!=this.parent.options.height){var t=this.parent.element.querySelector(".e-gridheader"),n=e.getScrollBarWidth()-this.getThreshold(),o=this.getCssProperties();t.style[o.padding]=n>0?n+"px":"0px",t.querySelector(".e-headercontent").style[o.border]=n>0?"1px":"0px";var r=this.parent.element.querySelector(".e-gridfooter");if(r)r.querySelector(".e-summarycontent").style[o.border]=n>0?"1px":"0px",r.style[o.padding]=n>0?n+"px":"0px"}},e.prototype.removePadding=function(e){var t=this.getCssProperties(e),n=this.parent.getHeaderContent().querySelector(".e-headercontent");n.style[t.border]="",n.parentElement.style[t.padding]="";this.parent.getFooterContent()},e.prototype.refresh=function(){if("100%"===this.parent.options.height){var e,t=this.parent.element.querySelector(".e-gridcontent"),n=o(e=t,"previous")+o(e,"next");t.style.height="calc(100% - "+n+"px)"}},e.prototype.getThreshold=function(){return"mozilla"===sf.base.Browser.info.name?.5:1},e.prototype.addEventListener=function(){this.wireEvents()},e.prototype.onContentScroll=function(e){var t=this,n=e,o=n.classList.contains("e-headercontent");return function(e){if(null!==t.content.querySelector("tbody")){var r=e.target,i=r.scrollLeft,s=(r.scrollWidth,r.classList.contains("e-summarycontent"));if(t.previousValues.left!==i){n.scrollLeft=i;var l=0!=t.parent.options.frozenColumns?t.parent.element.querySelector(".e-movablefootercontent"):t.parent.element.querySelector(".e-summarycontent");l&&(l.scrollLeft=i),s&&(t.header.scrollLeft=i),t.previousValues.left=i}else t.previousValues.top=o?r.scrollTop:t.previousValues.top}}},e.prototype.onFreezeContentScroll=function(e){var t=this,n=e;return function(e){if(null!==t.content.querySelector("tbody")){var o=e.target.scrollTop;t.previousValues.top!==o&&(n.scrollTop=o,t.previousValues.top=o)}}},e.prototype.onWheelScroll=function(e){var t=this,n=e;return function(e){if(null!==t.content.querySelector("tbody")){var o=n.scrollTop+(1===e.deltaMode?30*e.deltaY:e.deltaY);t.previousValues.top!==o&&(e.preventDefault(),t.parent.getContent().querySelector(".e-frozencontent").scrollTop=o,n.scrollTop=o,t.previousValues.top=o)}}},e.prototype.onTouchScroll=function(e){var t=this,n=e;return function(e){if("mouse"!==e.pointerType){var o,r,i=t.getPointXY(e),s=n.scrollTop+(t.pageXY.y-i.y),l=n.scrollLeft+(t.pageXY.x-i.x);if(t.parent.getHeaderContent().contains(e.target)){if(r=t.parent.options.frozenColumns?t.parent.getHeaderContent().querySelector(".e-movableheader"):t.parent.getHeaderContent().querySelector(".e-headercontent"),t.previousValues.left===l||l<0||r.scrollWidth-r.clientWidth<l)return;e.preventDefault(),r.scrollLeft=l,n.scrollLeft=l,t.pageXY.x=i.x,t.previousValues.left=l}else{if(o=t.parent.getContent().querySelector(".e-frozencontent"),t.previousValues.top===s&&(s<0||o.scrollHeight-o.clientHeight<s)||s<0||o.scrollHeight-o.clientHeight<s)return;e.preventDefault(),o.scrollTop=s,n.scrollTop=s,t.pageXY.y=i.y,t.previousValues.top=s}}}},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.wireEvents=function(){var e=this;if(this.oneTimeReady){var t=this.parent.options.frozenColumns;this.content=this.parent.getContent(),this.header=this.parent.getHeaderContent();var n=this.content.querySelector(".e-movablecontent"),o=this.content.querySelector(".e-frozencontent"),r=this.header.querySelector(".e-movableheader");if(this.parent.options.frozenColumns&&(sf.base.EventHandler.add(t?r:this.header,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(t?r:this.header,"touchmove pointermove",this.onTouchScroll(t?n:this.content),this)),t?(sf.base.EventHandler.add(n,"scroll",this.onContentScroll(r),this),sf.base.EventHandler.add(n,"scroll",this.onFreezeContentScroll(o),this),sf.base.EventHandler.add(o,"scroll",this.onFreezeContentScroll(n),this),sf.base.EventHandler.add(r,"scroll",this.onContentScroll(n),this),sf.base.EventHandler.add(o,"wheel",this.onWheelScroll(n),this),sf.base.EventHandler.add(o,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(o,"touchmove pointermove",this.onTouchScroll(n),this)):(sf.base.EventHandler.add(this.content,"scroll",this.onContentScroll(this.header),this),sf.base.EventHandler.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.options.aggregatesCount){var i=this.parent.options.frozenColumns?this.parent.element.querySelector(".e-movablefootercontent"):this.parent.element.querySelector(".e-summarycontent");sf.base.EventHandler.add(i,"scroll",this.onContentScroll(this.content),this)}this.refresh(),this.oneTimeReady=!1}var s,l,a,d,h,p=this.parent.getContent().querySelector(".e-table");d=function(){s=e.header.scrollLeft,l=p.scrollHeight,a=e.parent.getContent().clientHeight},h=function(){e.parent.options.enableVirtualization||(l<a&&(sf.base.addClass(p.querySelectorAll("tr:last-child td"),"e-lastrowcell"),e.parent.options.frozenColumns&&sf.base.addClass(e.parent.getContent().querySelector(".e-movablecontent").querySelectorAll("tr:last-child td"),"e-lastrowcell")),(e.parent.options.frozenColumns>0||e.parent.options.frozenColumns>0)&&e.header.querySelector(".e-movableheader")?e.header.querySelector(".e-movableheader").scrollLeft=e.previousValues.left:e.header.scrollLeft=e.previousValues.left,e.content.scrollLeft=e.previousValues.left,e.content.scrollTop=e.previousValues.top),e.parent.options.enableColumnVirtualization||(e.content.scrollLeft=s),e.parent.options.frozenColumns&&e.header.querySelector(".e-movableheader")&&(e.header.querySelector(".e-movableheader").scrollLeft=e.content.querySelector(".e-movablecontent").scrollLeft)},requestAnimationFrame((function(){try{h(null,d())}catch(e){h(e)}}))},e.prototype.getCssProperties=function(e){var t={},n=sf.base.isNullOrUndefined(e)?this.parent.options.enableRtl:e;return t.border=n?"borderLeftWidth":"borderRightWidth",t.padding=n?"paddingLeft":"paddingRight",t},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.removePadding(),sf.base.EventHandler.remove(this.parent.getContent(),"scroll",this.onContentScroll))},e.getScrollBarWidth=function(){return n()},e}(),f=function(){function e(e){this.parent=e,this.frozenHeader=e.element.querySelector(".e-frozenheader"),this.movableHeader=e.element.querySelector(".e-movableheader"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.options.frozenColumns&&(this.setFrozenHeight(),this.refreshFreeze({case:"textwrap"}),this.refreshFreeze({case:"refreshHeight"}))},e.prototype.refreshFreeze=function(e){if("textwrap"===e.case||"refreshHeight"===e.case){var t=void 0,n=void 0,o=this.getFrozenHeader(),r=this.getMovableHeader(),i=this.parent.getContent(),s=this.parent.options.wrapMode;"textwrap"===e.case?(("Header"!==s||e.isModeChg)&&(t=i.querySelector(".e-frozencontent").querySelectorAll("tr"),n=i.querySelector(".e-movablecontent").querySelectorAll("tr"),this.setWrapHeight(t,n,e.isModeChg,!0)),"Both"===s||e.isModeChg?(t=o.querySelectorAll("tr"),n=r.querySelectorAll("tr")):(t=o.querySelector("Content"===s?"tbody":"thead").querySelectorAll("tr"),n=r.querySelector("Content"===s?"tbody":"thead").querySelectorAll("tr")),this.parent.getHeaderContent().querySelectorAll(".e-stackedheadercell").length||this.setWrapHeight(t,n,e.isModeChg,!1,!1),this.refreshStackedHdrHgt()):"refreshHeight"===e.case&&(this.setWrapHeight(i.querySelector(".e-frozencontent").querySelectorAll("tr"),i.querySelector(".e-movablecontent").querySelectorAll("tr"),e.isModeChg),this.parent.getHeaderContent().querySelectorAll(".e-stackedheadercell").length||this.setWrapHeight(o.querySelectorAll("tr"),r.querySelectorAll("tr"),e.isModeChg))}},e.prototype.updateResizeHandler=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-rhandler")),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},e.prototype.setWrapHeight=function(e,t,n,o,r){for(var i,s,l=this.parent.options.allowTextWrap,a=this.parent.options.wrapMode,d=this.parent.getHeaderContent().querySelector("thead"),h=this.parent.getHeaderContent().querySelector("tbody"),p=[],c=[],u=0,f=e.length;u<f;u++)sf.base.isNullOrUndefined(e[u])||sf.base.isNullOrUndefined(t[u])||(p[u]=e[u].getBoundingClientRect().height,c[u]=t[u].getBoundingClientRect().height);for(u=0,f=e.length;u<f;u++)(n&&("Header"===a&&o||"Content"===a&&d.contains(e[u])||"Header"===a&&h.contains(e[u]))||r)&&(e[u].style.height=null,t[u].style.height=null),(i=p[u])>(s=c[u])?t[u].style.height=i+"px":s>i&&(e[u].style.height=s+"px");l&&this.setFrozenHeight()},e.prototype.setFrozenHeight=function(e){void 0===e&&(e=n());var t=this.parent.element.querySelector(".e-movablecontent").getBoundingClientRect().height,o=(this.parent.element.querySelector(".e-movablecontent"),this.parent.element.querySelector(".e-frozencontent"));o.style.height=t-e+"px",o.style.borderBottom=""},e.prototype.refreshStackedHdrHgt=function(){for(var e,t,n=this.getFrozenHeader().querySelectorAll(".e-columnheader"),o=this.getMovableHeader().querySelectorAll(".e-columnheader"),r=0,i=n.length;r<i;r++)e=this.getRowSpan(n[r]),t=this.getRowSpan(o[r]),e.min>1?this.updateStackedHdrRowHgt(r,e.max,n[r],o):t.min>1&&this.updateStackedHdrRowHgt(r,t.max,o[r],n);this.parent.options.allowResizing&&this.updateResizeHandler()},e.prototype.getRowSpan=function(e){for(var t,n,o,r=0,i=e.childElementCount;r<i;r++)0===r&&(n=e.children[0].rowSpan),t=e.children[r].rowSpan,n=Math.min(t,n),o=Math.max(t,n);return{min:n,max:o}},e.prototype.updateStackedHdrRowHgt=function(e,t,n,o){for(var r=0,i=0;i<t;i++)r+=o[e+i].style.height?parseInt(o[e+i].style.height,10):o[e+i].offsetHeight;n.style.height=r+"px"},e.prototype.getFrozenHeader=function(){return this.frozenHeader},e.prototype.getMovableHeader=function(){return this.movableHeader},e.prototype.refreshRowHeight=function(){0==this.parent.options.rowHeight&&(this.parent.options.frozenColumns||this.parent.options.frozenRows)&&(this.clearWrapHeight(),this.refreshFreeze({case:"refreshHeight"}),this.parent.options.allowResizing&&this.updateResizeHandler())},e.prototype.clearWrapHeight=function(){var e=function(e,t){for(var n=0,o=e.length;n<o;n++)sf.base.isNullOrUndefined(e[n])||sf.base.isNullOrUndefined(t[n])||(e[n].style.height=null,t[n].style.height=null)};this.parent.options.frozenColumns&&(this.parent.options.frozenRows&&e(this.parent.element.querySelector(".e-frozenheader").querySelectorAll("tr"),this.parent.element.querySelector(".e-movableheader").querySelectorAll("tr")),e(this.parent.element.querySelector(".e-frozencontent").querySelectorAll("tr"),this.parent.element.querySelector(".e-movablecontent").querySelectorAll("tr"))),this.parent.options.frozenRows&&0==this.parent.options.frozenColumns&&e(this.parent.element.querySelector(".e-headercontent").querySelectorAll("tr"),this.parent.element.querySelector(".e-content").querySelectorAll("tr"))},e}(),g=function(){function e(e){var t=this;this.dragStart=function(e){var n=t.parent.element.querySelector(".e-gridpopup");n&&(n.style.display="none"),t.parent.reorderModule.dragStart({target:e.target,column:t.column,event:e.event}),t.parent.groupModule.columnDragStart({target:e.target,column:t.column}),e.bindEvents(e.dragElement)},this.drag=function(e){var n=t.parent,o=e.target;if(o){var r=sf.base.closest(o,".e-grid"),i=t.parent.element.querySelector(".e-cloneproperties");if(!(r&&r.getAttribute("id")===n.element.getAttribute("id")||(sf.base.classList(i,["e-notallowedcur"],["e-defaultcur"]),n.options.allowReordering&&(n.element.querySelector(".e-reorderuparrow").style.display="none",n.element.querySelector(".e-reorderdownarrow").style.display="none"),n.options.groupReordering)))return;n.options.allowReordering&&t.parent.reorderModule.drag({target:e.target,column:t.column,event:e.event}),n.options.allowGrouping&&t.parent.groupModule.columnDrag({target:e.target})}},this.dragStop=function(e){var n,o=t.parent,i=o.element.querySelector(".e-gridpopup");i&&(i.style.display="none"),(!r(e.target,"e-headercell")&&!r(e.target,"e-groupdroparea")||!o.options.allowReordering&&r(e.target,"e-headercell")||!e.helper.getAttribute("e-mappinguid")&&r(e.target,"e-groupdroparea"))&&(sf.base.remove(e.helper),n=!0),o.options.allowReordering&&t.parent.reorderModule.dragStop({target:e.target,event:e.event,column:t.column,cancel:n})},this.drop=function(e){var n=t.parent,o=(e.droppedElement.getAttribute("e-mappinguid"),sf.base.closest(e.target,".e-grid"));sf.base.remove(e.droppedElement),o&&o.getAttribute("id")!==n.element.getAttribute("id")||!n.options.allowReordering&&!n.options.allowGrouping||(n.options.allowReordering&&t.parent.reorderModule.headerDrop({target:e.target}),n.options.allowGrouping&&t.parent.groupModule.columnDrop({target:e.target,droppedElement:e.droppedElement}))},this.helper=function(e){var n=t.parent,o=e.sender.target,i=r(o,"e-headercell");if(!n.options.allowReordering&&!n.options.allowGrouping||!sf.base.isNullOrUndefined(i)&&i.querySelectorAll(".e-checkselectall").length>0)return!1;var s=sf.base.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),l=o.classList.contains("e-headercell")?o:i;if(!l||!n.options.allowReordering&&l.classList.contains("e-stackedheadercell"))return!1;var a,d=l.offsetHeight,h=l.querySelector(".e-headercelldiv")||l.querySelector(".e-stackedheadercelldiv");if(h){if(a=l.querySelector(".e-stackedheadercelldiv")?n.getStackedHeaderColumnByHeaderText(h.innerText.trim(),n.options.columns):n.getColumnByUid(h.getAttribute("e-mappinguid")),t.column=a,t.column.lockColumn)return!1;s.setAttribute("e-mappinguid",h.getAttribute("e-mappinguid"))}return s.innerHTML=h?a.headerText:l.firstElementChild.innerHTML,s.style.width=l.offsetWidth+"px",s.style.height=l.offsetHeight+"px",s.style.lineHeight=(d-6).toString()+"px",n.element.appendChild(s),s},this.parent=e,(this.parent.options.allowGrouping||this.parent.options.allowReordering)&&(this.initializeHeaderDrag(),this.initializeHeaderDrop())}return e.prototype.initializeHeaderDrag=function(){var e=this.parent;if(this.parent.options.allowReordering||this.parent.options.allowGrouping&&this.parent.options.showDropArea)for(var t=[].slice.call(e.getHeaderContent().querySelectorAll(".e-columnheader")),n=0,o=t.length;n<o;n++)new sf.base.Draggable(t[n],{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler"})},e.prototype.initializeHeaderDrop=function(){var e=this.parent;new sf.base.Droppable(e.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})},e}(),m=function(){function e(e){var t=this;this.drop=function(e){t.parent.groupModule.columnDrop({target:e.target,droppedElement:e.droppedElement}),sf.base.remove(e.droppedElement)},this.parent=e,this.parent.options.allowGrouping&&this.initializeContentDrop()}return e.prototype.initializeContentDrop=function(){var e=this.parent;new sf.base.Droppable(e.getContent(),{accept:".e-dragclone",drop:this.drop})},e}(),y=function(){function e(e){this.parent=e,e.options.allowReordering&&this.createReorderElement()}return e.prototype.chkDropPosition=function(e,t){var n=this.parent.getColumnByUid(t.firstElementChild.getAttribute("e-mappinguid")),o=!n||!n.lockColumn;return(e.parentElement.isEqualNode(t.parentElement)||this.parent.options.frozenColumns&&Array.prototype.indexOf.call(sf.base.closest(e,"thead").children,e.parentElement)===Array.prototype.indexOf.call(sf.base.closest(t,"thead").children,t.parentElement))&&this.targetParentContainerIndex(e,t)>-1&&o},e.prototype.chkDropAllCols=function(e,t){for(var n,o=this.getHeaderCells();!n&&o.length>0;)n=e!==o.pop()&&this.targetParentContainerIndex(e,t)>-1;return n},e.prototype.findColParent=function(e,t,n){n=n;for(var o=0,r=t.length;o<r;o++){if(e===t[o])return!0;if(t[o].columns){var i=n.length;if(n.push(t[o]),this.findColParent(e,t[o].columns,n))return!0;n.splice(i,n.length-i)}}return!1},e.prototype.getColumnsModel=function(e){for(var t=[],n=[],o=0,r=e.length;o<r;o++)t.push(e[o]),e[o].columns&&(n=n.concat(e[o].columns));return n.length&&(t=t.concat(this.getColumnsModel(n))),t},e.prototype.headerDrop=function(e){var t=this.parent,n=(this.element.querySelector(".e-headercelldiv")||this.element.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid"),o=t.getColumnByUid(n);if(sf.base.closest(e.target,"th")&&(sf.base.isNullOrUndefined(o)||o.allowReordering&&!o.lockColumn)){var r=sf.base.closest(e.target,".e-headercell"),s=(r.querySelector(".e-headercelldiv")||r.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");if(!sf.base.isNullOrUndefined(s)){var l=t.getColumnByUid(s);if(sf.base.isNullOrUndefined(l)||!l.allowReordering||l.lockColumn)return}if(r&&this.chkDropPosition(this.element,r)&&this.chkDropAllCols(this.element,r))if(this.parent.options.enableColumnVirtualization){var a=this.parent.options.columns,d=this.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),h=this.parent.getColumns(!0).filter((function(e){return e.uid===d})),p=null,c=h[0],u=r.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");a.some((function(e,t){return e.uid===u&&(p=t,e.uid===u)}));sf.base.isNullOrUndefined(p)||this.moveColumns(p,c)}else{var f=this.targetParentContainerIndex(this.element,r),g=this.element.firstElementChild.getAttribute("e-mappinguid");if(this.destElement=r,g)this.moveColumns(f,this.parent.getColumnByUid(g));else{var m=this.getHeaderCells(),y=i(this.element,m),v=(a=this.getColumnsModel(this.parent.options.columns))[y];this.moveColumns(f,v)}}}},e.prototype.isActionPrevent=function(e){return d(e.element)},e.prototype.moveColumns=function(e,t,n,o){var r=this.parent;if(!this.isActionPrevent(r)){var i=this.getColParent(t,this.parent.options.columns),l=i?i.columns:this.parent.options.columns,a=s(t,l);if(this.parent.options.frozenColumns&&i&&!n){for(var d=0;d<l.length;d++)if(l[d].field===t.field){a=d;break}var h=this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute("e-mappinguid"));if(h){for(d=0;d<l.length;d++)if(l[d].field===h.field){e=d;break}}else for(d=0;d<l.length;d++)l[d].headerText===this.destElement.innerText.trim()&&(e=d)}r.options.allowReordering&&a!==e&&-1!==a&&-1!==e&&(l.splice(e,0,l.splice(a,1)[0]),r.getColumns(!0),!1!==o&&r.dotNetRef.invokeMethodAsync("ColumnReordered",{requestType:"reorder",fromIndex:e,toIndex:a,toColumnUid:t.uid}))}},e.prototype.targetParentContainerIndex=function(e,t){var n=this.getHeaderCells(),o=this.parent.options.columns,r=this.getColumnsModel(o),l=this.getColParent(r[i(e,n)],o);return o=l?l.columns:o,s(r[i(t,n)],o)},e.prototype.getHeaderCells=function(){var e=this.parent.options.frozenColumns;if(e){var t=void 0,n=void 0,o=[],r=[].slice.call(this.parent.element.querySelector(".e-frozenheader").querySelectorAll(".e-columnheader"));if(e)for(var i=[].slice.call(this.parent.getHeaderContent().querySelector(".e-movableheader").querySelectorAll(".e-columnheader")),s=0;s<r.length;s++){t=[].slice.call(r[s].getElementsByClassName("e-headercell")),n=[].slice.call(i[s].getElementsByClassName("e-headercell"));for(var l=void 0,a=0;a<t.length;a++){for(var d=0;d<n.length;d++)if(n[d].innerText===t[a].innerText){l=!0;break}l||(o=o.concat([t[a]]))}for(d=0;d<n.length;d++)o.push(n[d])}else for(s=0;s<r.length;s++){n=[].slice.call(r[s].getElementsByClassName("e-headercell"));for(a=0;a<n.length;a++){for(l=void 0,d=a+1;d<n.length;d++)if(n[d].innerText===n[a].innerText){l=!0;break}l||(o=o.concat([n[a]]))}}return o}return[].slice.call(this.parent.element.getElementsByClassName("e-headercell"))},e.prototype.getColParent=function(e,t){var n=[];return this.findColParent(e,t,n),n[n.length-1]},e.prototype.reorderSingleColumn=function(e,t){var n=this.parent.getColumnByField(e),o=this.parent.getColumnByField(t);if((sf.base.isNullOrUndefined(n)||n.allowReordering&&!n.lockColumn)&&(sf.base.isNullOrUndefined(o)||o.allowReordering&&!n.lockColumn)){var r=this.parent.getColumnByField(t),i=this.getColParent(r,this.parent.options.columns),l=s(r,i?i.columns:this.parent.options.columns);l>-1&&this.moveColumns(l,this.parent.getColumnByField(e),!0)}},e.prototype.reorderMultipleColumns=function(e,t){var n=this.parent.getColumnIndexByField(t),o=this.parent.getColumnByField(t);if(!(n<0)&&(sf.base.isNullOrUndefined(o)||o.allowReordering&&!o.lockColumn)){for(var r=0;r<e.length;r++){var i=this.parent.getColumnByField(e[r]);if(!sf.base.isNullOrUndefined(i)&&(!i.allowReordering||i.lockColumn))return}for(r=0;r<e.length;r++){i=this.parent.getColumnByIndex(n);var l=this.getColParent(i,this.parent.options.columns),a=s(i,l?l.columns:this.parent.options.columns);a>-1&&this.moveColumns(a,this.parent.getColumnByField(e[r]),!0,!1),this.parent.getColumnIndexByField(e[r+1])>=a&&n++}var d=this.parent.getColumns();this.parent.dotNetRef.invokeMethodAsync("ColumnReordered",{fromColumnUid:e.map((function(e){return d.filter((function(t){return t.field===e}))[0].uid})),toColumnUid:o.uid,isMultipleReorder:!0,requestType:"reorder",type:"actionBegin"})}},e.prototype.moveTargetColumn=function(e,t){t>-1&&this.moveColumns(t,e,!0)},e.prototype.reorderSingleColumnByTarget=function(e,t){var n=this.parent.getColumnByField(e);this.moveTargetColumn(n,t)},e.prototype.reorderMultipleColumnByTarget=function(e,t){for(var n=0;n<e.length;n++)this.reorderSingleColumnByTarget(e[n],t)},e.prototype.reorderColumns=function(e,t){"string"==typeof e?(this.reorderSingleColumn(e,t),this.fromCol=e):(this.reorderMultipleColumns(e,t),this.fromCol=e[0])},e.prototype.reorderColumnByIndex=function(e,t){var n=this.parent.getColumnByIndex(e);this.moveTargetColumn(n,t)},e.prototype.reorderColumnByTargetIndex=function(e,t){"string"==typeof e?this.reorderSingleColumnByTarget(e,t):this.reorderMultipleColumnByTarget(e,t)},e.prototype.createReorderElement=function(){var e=this.parent.element.querySelector(".e-headercontent");this.upArrow=e.appendChild(sf.base.createElement("div",{className:"e-icons e-icon-reorderuparrow e-reorderuparrow",attrs:{style:"display:none"}})),this.downArrow=e.appendChild(sf.base.createElement("div",{className:"e-icons e-icon-reorderdownarrow e-reorderdownarrow",attrs:{style:"display:none"}}))},e.prototype.destroy=function(){this.parent.element;this.upArrow&&sf.base.remove(this.upArrow),this.downArrow&&sf.base.remove(this.downArrow)},e.prototype.keyPressHandler=function(e){this.parent;e.action},e.prototype.drag=function(e){var t=this.parent,n=e.target;if(e.column.allowReordering&&!e.column.lockColumn){var o=sf.base.closest(n,".e-headercell:not(.e-stackedHeaderCell)"),i=t.element.querySelector(".e-cloneproperties"),s=this.x>l(e.event).x+t.getContent().firstElementChild.scrollLeft;sf.base.removeClass(t.element.querySelector(".e-headercontent").querySelectorAll(".e-reorderindicate"),["e-reorderindicate"]),this.setDisplay("none"),this.stopTimer(),sf.base.classList(i,["e-defaultcur"],["e-notallowedcur"]),this.updateScrollPostion(e.event),o&&!o.isEqualNode(this.element)&&(n=o,this.chkDropPosition(this.element,n)&&this.chkDropAllCols(this.element,n)?(this.updateArrowPosition(n,s),sf.base.classList(n,["e-allowDrop","e-reorderindicate"],[])):t.options.allowGrouping&&r(e.target,"e-groupdroparea")||sf.base.classList(i,["e-notallowedcur"],["e-defaultcur"]))}},e.prototype.updateScrollPostion=function(e){var t=this,n=this.parent.options.frozenColumns,o=l(e).x,r=this.parent.element.getBoundingClientRect(),i=n?this.parent.element.querySelector(".e-movableheader").getBoundingClientRect().left:r.left,s=r.right,a=n?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent().firstElementChild;o>i&&o<i+35?this.timer=window.setInterval((function(){t.setScrollLeft(a,!0)}),50):o<s&&o>s-35&&(this.timer=window.setInterval((function(){t.setScrollLeft(a,!1)}),50))},e.prototype.setScrollLeft=function(e,t){var n=e.scrollLeft;e.scrollLeft=e.scrollLeft+(t?-5:5),n!==e.scrollLeft&&this.setDisplay("none")},e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.updateArrowPosition=function(e,t){var n=e.getBoundingClientRect(),o=this.parent.element.getBoundingClientRect();t&&n.left<o.left||!t&&n.right>o.right||(this.upArrow.style.top=n.top+n.height-o.top+"px",this.downArrow.style.top=n.top-o.top-4+"px",this.upArrow.style.left=this.downArrow.style.left=(t?n.left:n.right)-o.left-4+"px",this.setDisplay(""))},e.prototype.dragStart=function(e){var t=this.parent,n=e.target;this.element=n.classList.contains("e-headercell")?n:r(n,"e-headercell"),e.column.allowReordering&&!e.column.lockColumn&&(this.x=l(e.event).x+t.getContent().firstElementChild.scrollLeft)},e.prototype.dragStop=function(e){var t=this.parent;this.setDisplay("none"),this.stopTimer(),e.cancel,sf.base.removeClass(t.element.querySelector(".e-headercontent").querySelectorAll(".e-reorderindicate"),["e-reorderindicate"])},e.prototype.setDisplay=function(e){this.upArrow.style.display=e,this.downArrow.style.display=e},e.prototype.getModuleName=function(){return"reorder"},e}(),v=function(){function e(e){this.parent=e}return e.prototype.setMinwidthBycalculation=function(e){var t=0,n=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)||"auto"===e.width}));if(n.length){sf.base.isNullOrUndefined(this.parent.options.width)||"auto"===this.parent.options.width||(t=("string"==typeof this.parent.options.width?parseInt(this.parent.options.width,10):this.parent.options.width)-e);for(var o=0,r=0,i=n;r<i.length;r++){var s=i[r];o+=sf.base.isNullOrUndefined(s.minWidth)?0:"string"==typeof s.minWidth?parseInt(s.minWidth,10):s.minWidth}for(var l=0;l<n.length;l++)0===e&&this.parent.options.allowResizing&&this.isWidthUndefined()&&l!==n.length-1&&this.setUndefinedColumnWidth(n),0!==e&&t<o?this.setWidth(n[l].minWidth,this.parent.getColumnIndexByField(n[l].field)):0!==e&&t>o&&this.setWidth("",this.parent.getColumnIndexByField(n[l].field),!0)}},e.prototype.setUndefinedColumnWidth=function(e){for(var t=0;t<e.length;t++)t!==e.length-1&&(e[t].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[t].field)))},e.prototype.setColumnWidth=function(e,t,n){if(!(this.parent.getColumns().length<1)){var o=sf.base.isNullOrUndefined(t)?this.parent.getNormalizedColumnIndex(e.uid):t,r=this.getWidth(e),i=this.getTableWidth(this.parent.getColumns());null!==r&&(this.setWidth(r,o),"auto"!==this.parent.options.width&&-1===this.parent.options.width.toString().indexOf("%")&&this.setMinwidthBycalculation(i),(this.parent.options.allowResizing&&"resize"===n||this.parent.options.frozenColumns&&this.parent.options.allowResizing)&&this.setWidthToTable(),this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{index:o,width:r,columnUid:e.uid}))}},e.prototype.setWidth=function(e,t,n){if("string"==typeof e&&-1!==e.indexOf("%")&&(!Boolean(window.chrome)||!Boolean(window.chrome.webstore))&&this.parent.options.allowGrouping){var o=this.parent.element.offsetWidth;e=parseInt(e,10)/100*o}var i,s,l=this.parent.getHeaderTable(),a=this.parent.getContentTable(),d=sf.base.formatUnit(e),h=this.parent.options.frozenColumns,p=this.parent.getHeaderContent().querySelector(".e-movableheader"),c=this.parent.getContent().querySelector(".e-movablecontent");if(h&&t>=h&&p&&p.querySelector("colgroup"))i=p.querySelector("colgroup").children[t-h];else if(this.parent.options.enableColumnVirtualization&&h&&p.scrollLeft>0){i=(u=p.querySelector("colgroup")).children[u.children.length-1-t]}else i=l.querySelector("colgroup").children[t];if(i&&!n?i.style.width=d:i&&n&&(i.style.width=" "),h&&t>=h)s=this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup").children[t-h];else if(this.parent.options.enableColumnVirtualization&&h&&c.scrollLeft>0){var u;s=(u=this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup")).children[u.children.length-1-t]}else s=a.querySelector("colgroup").children[t];if(s&&!n?s.style.width=d:s&&n&&(s.style.width=" "),0!=this.parent.options.aggregatesCount){var f=void 0;f=h&&t>=h?this.parent.getFooterContent().querySelector(".e-movablefootercontent").querySelector("colgroup").children[t-h]:this.parent.getFooterContent().querySelector("colgroup").children[t],s&&!n?f.style.width=d:s&&n&&(f.style.width=" ")}for(var g=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),m=[],y=0;y<g.length;y++)if(r(g[y],"e-grid").id===this.parent.element.id)for(var v=0;v<g[y].querySelector("colgroup").children.length;v++)m.push(g[y].querySelector("colgroup").children[v]);g.length&&m.length&&(m[t].style.width=d)},e.prototype.isWidthUndefined=function(){var e=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)&&sf.base.isNullOrUndefined(e.minWidth)})).length;return this.parent.getColumns().length===e},e.prototype.getWidth=function(e){if(!e.width)return null;var t=parseInt(e.width.toString(),10);return e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width},e.prototype.getTableWidth=function(e){for(var t=0,n=0,o=e;n<o.length;n++){var r=o[n],i=this.getWidth(r);"auto"===r.width&&(i=0),!1!==r.visible&&null!==i&&(t+=parseInt(i.toString(),10))}return t},e.prototype.calcMovableOrFreezeColWidth=function(e){var t=this.parent.getColumns().slice();return"movable"===e?t.splice(0,this.parent.options.frozenColumns):"freeze"===e&&t.splice(this.parent.options.frozenColumns,t.length),sf.base.formatUnit(this.getTableWidth(t))},e.prototype.setWidthToFrozenTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze");this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e,this.parent.getFooterContent()&&this.parent.getFooterContent().querySelector(".e-frozenfootercontent").firstElementChild&&(this.parent.getFooterContent().querySelector(".e-frozenfootercontent").firstElementChild.style.width=e)},e.prototype.setWidthToMovableTable=function(){var e="",t=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)})).length>=1,n=this.parent.getColumns().filter((function(e){return"auto"===e.width})).length>=1;"number"!=typeof this.parent.options.width||t||n?t||n||(e=this.calcMovableOrFreezeColWidth("movable")):e=sf.base.formatUnit(this.parent.options.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5),this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild&&(this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild.style.width=e),this.parent.getFooterContent()&&this.parent.getFooterContent().querySelector(".e-movablefootercontent").firstElementChild&&(this.parent.getFooterContent().querySelector(".e-movablefootercontent").firstElementChild.style.width=e),this.parent.getContent().querySelector(".e-movablecontent").firstElementChild.style.width=e},e.prototype.setWidthToFrozenEditTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=e},e.prototype.setWidthToMovableEditTable=function(){var e=this.calcMovableOrFreezeColWidth("movable");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=e},e.prototype.setWidthToTable=function(){var e=sf.base.formatUnit(this.getTableWidth(this.parent.getColumns()));this.parent.options.frozenColumns?(this.setWidthToFrozenTable(),this.setWidthToMovableTable()):(this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e,0!=this.parent.options.aggregatesCount&&(this.parent.getFooterContent().querySelector(".e-table").style.width=e));var t=this.parent.element.querySelector(".e-table.e-inline-edit");t&&this.parent.options.frozenColumns?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):t&&(t.style.width=e)},e}(),b="e-rhandler",C="e-rsuppress",w="e-ricon",S="e-rhelper",x="th.e-headercell",H="e-rcursor",E=function(){function e(e){this.tapped=!1,this.isDblClk=!0,this.parent=e,this.widthService=new v(this.parent)}return e.prototype.autoFitColumns=function(e){var t=null==e||e.length<=0?this.parent.getColumns().map((function(e){return e.field})):"string"==typeof e?[e]:e;this.findColumn(t)},e.prototype.autoFit=function(){var e=this.parent.getColumns().filter((function(e){return!0===e.autoFit})).map((function(e){return e.field||e.headerText}));e.length>0&&this.autoFitColumns(e)},e.prototype.resizeColumn=function(e,t,n){var o,r,i,s,l,a,d=this.parent,h=0,p=0,c=n||this.parent.getUidByColumnField(e),u=this.parent.getNormalizedColumnIndex(c),f=this.parent.getColumnIndexByField(e),g=d.options.frozenColumns;sf.base.isNullOrUndefined(d.getFooterContent())||(i=d.getFooterContent().querySelector(".e-table")),g?t<g?(o=d.getHeaderTable(),r=d.getContentTable(),s=o.querySelector('[e-mappinguid="'+c+'"]').parentElement.cloneNode(!0),l=r.querySelectorAll("td:nth-child("+(u+1)+")"),i&&(a=i.querySelectorAll("td:nth-child("+(u+1)+")"))):(o=d.getHeaderContent().querySelector(".e-movableheader").children[0],r=d.getContent().querySelector(".e-movablecontent").children[0],s=o.querySelector('[e-mappinguid="'+c+'"]').parentElement.cloneNode(!0),l=r.querySelectorAll("td:nth-child("+(u-g+1)+")"),i&&(a=(i=d.getFooterContent().querySelector(".e-movablefootercontent").children[0]).querySelectorAll("td:nth-child("+(u-g+1)+")"))):(o=d.getHeaderTable(),r=d.getContentTable(),s=o.querySelector('[e-mappinguid="'+c+'"]').parentElement.cloneNode(!0),l=r.querySelectorAll("td:nth-child("+(u+1)+"):not(.e-groupcaption)"),i&&(a=i.querySelectorAll("td:nth-child("+(u+1)+"):not(.e-groupcaption)")));var m=o.querySelector("tr").querySelectorAll(".e-grouptopleftcell");if(m.length>0)for(var y=0;y<m.length;y++)p+=m[y].offsetWidth;var v=r.querySelector(".e-detailrowcollapse")||r.querySelector(".e-detailrowexpand");this.parent.options.hasDetailTemplate&&v&&(p+=v.offsetWidth);var b=[s],C=[],w=[];if(i)for(y=0;y<a.length;y++)w[y]=a[y].cloneNode(!0);for(y=0;y<l.length;y++)C[y]=l[y].cloneNode(!0);var S=this.createTable(o,b,"e-gridheader"),x=this.createTable(r,C,"e-gridcontent"),H=null;w.length&&(H=this.createTable(i,w,"e-gridfooter"));var E=d.getColumns()[f].width=sf.base.formatUnit(Math.max(S,x,H));if(this.widthService.setColumnWidth(d.getColumns()[f]),!1===d.getColumns().some((function(e){return null===e.width||void 0===e.width||e.width.length<=0}))){var R=d.getColumns();for(y=0;y<R.length;y++)R[y].visible&&(h+=parseFloat(R[y].width))}var q=h+p;h>0&&!d.options.frozenColumns&&(o.style.width=sf.base.formatUnit(q),r.style.width=sf.base.formatUnit(q),sf.base.isNullOrUndefined(i)||(i.style.width=sf.base.formatUnit(q)));var T=o.offsetWidth;d.getContent().scrollWidth>T?(o.classList.add("e-tableborder"),r.classList.add("e-tableborder")):(o.classList.remove("e-tableborder"),r.classList.remove("e-tableborder")),sf.base.isNullOrUndefined(i)||i.classList.add("e-tableborder"),this.parent.freezeModule.refreshRowHeight(),this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{width:E,columnUid:c})},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.widthService=null,this.unwireEvents())},e.prototype.getModuleName=function(){return"resize"},e.prototype.findColumn=function(e){for(var t=0;t<e.length;t++){var n=e[t],o=this.parent.getColumnIndexByField(n);!0===this.parent.getColumns()[o].visible&&this.resizeColumn(n,o)}},e.prototype.createTable=function(e,t,n){var o=sf.base.createElement("div");o.className=this.parent.element.className,o.style.cssText="display: inline-block;visibility:hidden;position:absolute";var r=sf.base.createElement("div");r.className=n;var i=sf.base.createElement("table");i.className=e.className,i.classList.add("e-resizetable"),i.style.cssText="table-layout: auto;width: auto";for(var s=sf.base.createElement("tr"),l=0;l<t.length;l++){var a=s.cloneNode();a.className=e.querySelector("tr").className,a.appendChild(t[l]),i.appendChild(a)}r.appendChild(i),o.appendChild(r),document.body.appendChild(o);var d=i.getBoundingClientRect().width;return document.body.removeChild(o),Math.ceil(d)},e.prototype.render=function(){this.unwireEvents(),this.wireEvents(),this.setHandlerHeight()},e.prototype.refreshHeight=function(){for(var e=this.getResizeHandlers(),t=0;t<e.length;t++)e[t].parentElement.offsetHeight>0&&(e[t].style.height=e[t].parentElement.offsetHeight+"px");this.setHandlerHeight()},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.resizeStart,this),sf.base.EventHandler.add(this.parent.getHeaderContent(),"dblclick",this.callAutoFit,this)},e.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.EventHandler.remove(this.parent.getHeaderContent(),"dblclick",this.callAutoFit)},e.prototype.getResizeHandlers=function(){return this.parent.options.frozenColumns?[].slice.call(this.parent.getHeaderContent().querySelectorAll("."+b)):[].slice.call(this.parent.getHeaderContent().querySelector(".e-table").querySelectorAll("."+b))},e.prototype.setHandlerHeight=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelector(".e-table").querySelectorAll("."+C)),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},e.prototype.callAutoFit=function(e){if(e.target.classList.contains("e-rhandler")){var t=this.getTargetColumn(e);if(t.columns)return;this.resizeColumn(t.field,this.parent.getNormalizedColumnIndex(t.uid),t.uid),sf.base.closest(e.target,x).classList.add("e-resized")}},e.prototype.resizeStart=function(e){if(e.target.classList.contains("e-rhandler")){if(!this.helper){if(0===this.getScrollBarWidth()){for(var t=0,n=this.refreshColumnWidth();t<n.length;t++){var o=n[t];this.widthService.setColumnWidth(o)}this.widthService.setWidthToTable()}this.refreshStackedColumnWidth(),this.element=e.target,this.parentElementWidth=this.parent.element.getBoundingClientRect().width,this.appendHelper(),this.column=this.getTargetColumn(e),this.pageX=this.getPointX(e),this.parent.options.enableRtl?this.minMove=parseFloat(this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.minMove=(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(sf.base.isNullOrUndefined(this.column.width)?"":this.column.width.toString()),this.minMove+=this.pageX}sf.base.Browser.isDevice&&!this.helper.classList.contains(w)?(this.helper.classList.add(w),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.removeHelper,this),sf.base.EventHandler.add(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart,this)):(sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,this.resizeEnd,this),sf.base.EventHandler.add(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing,this),this.updateCursor("add"),this.parent.dotNetRef.invokeMethodAsync("ResizeStarted",{columnUid:this.column.uid}))}},e.prototype.cancelResizeAction=function(e){e&&(sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove")),sf.base.Browser.isDevice&&(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart)),sf.base.detach(this.helper),this.refresh()},e.prototype.getWidth=function(e,t,n){return t&&e<t?t:n&&e>n?n:e},e.prototype.updateResizeEleHeight=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-rhandler")),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},e.prototype.getColData=function(e,t){return{width:parseFloat(sf.base.isNullOrUndefined(this.widthService.getWidth(e))||"auto"===this.widthService.getWidth(e)?"0":this.widthService.getWidth(e).toString())+t,minWidth:e.minWidth?parseFloat(e.minWidth.toString()):null,maxWidth:e.maxWidth?parseFloat(e.maxWidth.toString()):null}},e.prototype.resizing=function(e){if(!sf.base.isNullOrUndefined(this.column)){var t=0;sf.base.isNullOrUndefined(this.column)&&(t=r(this.element,"th").offsetWidth),this.parent.options.allowTextWrap&&(this.updateResizeEleHeight(),this.setHelperHeight());var n=this.getPointX(e),o=this.parent.options.enableRtl?-(n-this.pageX):n-this.pageX,i=this.getColData(this.column,o);i.width||(i.width=sf.base.closest(this.element,"th").offsetWidth);var s=this.getWidth(i.width,i.minWidth,i.maxWidth);if((!this.parent.options.enableRtl&&this.minMove>=n||this.parent.options.enableRtl&&this.minMove<=n)&&(s=this.column.minWidth?parseFloat(this.column.minWidth.toString()):0,this.pageX=n=this.minMove),s!==parseFloat(sf.base.isNullOrUndefined(this.column.width)||"auto"===this.column.width?t.toString():this.column.width.toString())){this.pageX=n,this.column.width=sf.base.formatUnit(s);var l=[this.column],a=[this.column];this.column.columns&&(l=this.getSubColumns(this.column,[]),l=this.calulateColumnsWidth(l,!1,o),a=this.calulateColumnsWidth(l,!0,o));for(var d=0,h=a;d<h.length;d++){var p=h[d];this.widthService.setColumnWidth(p,null,"resize")}this.updateHelper()}this.isDblClk=!1}},e.prototype.calulateColumnsWidth=function(e,t,n){for(var o=[],r=0,i=e;r<i.length;r++){for(var s=i[r],l=0,a=0;a<e.length;a++)l+=parseFloat(e[a].width.toString());var d=this.getColData(s,parseFloat(s.width)*n/l),h=this.getWidth(d.width,d.minWidth,d.maxWidth);h!==parseFloat(s.width.toString())&&(t&&(s.width=sf.base.formatUnit(h<1?1:h)),o.push(s))}return o},e.prototype.getSubColumns=function(e,t){for(var n=0,o=e.columns;n<o.length;n++){var r=o[n];!1!==r.visible&&r.allowResizing&&(r.columns?this.getSubColumns(r,t):t.push(r))}return t},e.prototype.resizeEnd=function(e){if(this.helper){sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove"),sf.base.detach(this.helper);this.parent.getContent();sf.base.closest(this.element,".e-headercell").classList.add("e-resized"),r(this.element,"e-frozenheader")?this.isFrozenColResized=!0:this.isFrozenColResized=!1,this.parent.options.frozenColumns&&this.parent.freezeModule.refreshRowHeight(),this.parent.options.allowTextWrap&&this.updateResizeEleHeight();var t=this.column.width.toString();t=t.replace("px",""),this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{width:t,columnUid:this.column.uid}),this.refresh(),this.doubleTapEvent(e),this.isDblClk=!0}},e.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},e.prototype.refreshColumnWidth=function(){for(var e=this.parent.getColumns(),t=0,n=[].slice.apply(this.parent.getHeaderContent().querySelectorAll("th.e-headercell"));t<n.length;t++)for(var o=n[t],r=0,i=e;r<i.length;r++){var s=i[r];if(o.querySelector("[e-mappinguid]")&&o.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===s.uid&&s.visible){s.width=o.getBoundingClientRect().width;break}}return e},e.prototype.refreshStackedColumnWidth=function(){for(var e=0,t=this.parent.getStackedColumns(this.parent.options.columns);e<t.length;e++){var n=t[e];n.width=this.getStackedWidth(n,0)}},e.prototype.getStackedWidth=function(e,t){for(var n=0,o=e.columns;n<o.length;n++){var r=o[n];!1!==r.visible&&(r.columns?this.getStackedWidth(r,t):t+=r.width)}return t},e.prototype.getTargetColumn=function(e){var t=sf.base.closest(e.target,x),n=(t=t.querySelector(".e-headercelldiv")||t.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");return this.parent.getColumnByUid(n)},e.prototype.updateCursor=function(e){var t=[].slice.call(this.parent.getHeaderContent().querySelectorAll("th"));t.push(this.parent.element);for(var n=0,o=t;n<o.length;n++){o[n].classList[e](H)}},e.prototype.refresh=function(){this.column=null,this.pageX=null,this.element=null,this.helper=null},e.prototype.appendHelper=function(){this.helper=sf.base.createElement("div",{className:S}),this.parent.element.appendChild(this.helper),this.setHelperHeight()},e.prototype.setHelperHeight=function(){var e=this.parent.getContent().offsetHeight-this.getScrollBarWidth(),t=sf.base.closest(this.element,x),n=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr")),o=this.parent.options.frozenColumns;o&&(t.parentElement.children.length!==o?n.splice(0,n.length/2):n.splice(n.length/2,n.length/2));for(var r=n.indexOf(t.parentElement);r<n.length;r++)e+=n[r].offsetHeight;var i=this.calcPos(t);i.left+=this.parent.options.enableRtl?-1:t.offsetWidth-2,this.helper.style.cssText="height: "+e+"px; top: "+i.top+"px; left:"+Math.floor(i.left)+"px;"},e.prototype.getScrollBarWidth=function(e){var t=this.parent.options.frozenColumns?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent();return t.scrollHeight>t.clientHeight&&e||t.scrollWidth>t.clientWidth?n():0},e.prototype.removeHelper=function(e){var t=e.target.classList;t.contains(b)||t.contains(w)||!this.helper||(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.detach(this.helper),this.refresh())},e.prototype.updateHelper=function(){var e=sf.base.closest(this.element,x),t=Math.floor(this.calcPos(e).left+(this.parent.options.enableRtl?-1:e.offsetWidth-2));if(t>this.parentElementWidth&&(t=this.parentElementWidth-2),this.parent.options.frozenColumns){var n=sf.base.closest(e,".e-table").offsetLeft;t<n&&(t=n)}this.helper.style.left=t+"px"},e.prototype.calcPos=function(e){for(var t={top:0,left:0},n=e.getBoundingClientRect(),o=e.ownerDocument,r=e.offsetParent||o.documentElement;r&&(r===o.body||r===o.documentElement)&&"static"===r.style.position;)r=r.parentNode;return r&&r!==e&&1===r.nodeType&&(t=r.getBoundingClientRect()),{top:n.top-t.top,left:n.left-t.left}},e.prototype.doubleTapEvent=function(e){this.getUserAgent()&&this.isDblClk&&(this.tapped?(clearTimeout(this.tapped),this.callAutoFit(e),this.tapped=null):this.tapped=setTimeout(this.timeoutHandler(),300))},e.prototype.getUserAgent=function(){var e=sf.base.Browser.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)},e.prototype.timeoutHandler=function(){this.tapped=null},e}(),R=function(){function e(e){var t=this;this.visualElement=sf.base.createElement("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}}),this.helper=function(e){var n=t.parent,o=e.sender.target,i=o.classList.contains("e-groupheadercell")?o:r(o,"e-groupheadercell");return!(!i||!o.classList.contains("e-drag")&&t.parent.options.groupReordering)&&(t.column=n.getColumnByField(i.firstElementChild.getAttribute("ej-mappingname")),t.visualElement.textContent=i.textContent,t.visualElement.style.width=i.offsetWidth+2+"px",t.visualElement.style.height=i.offsetHeight+2+"px",t.visualElement.setAttribute("e-mappinguid",t.column.uid),n.element.appendChild(t.visualElement),t.visualElement)},this.dragStart=function(e){t.parent.element.classList.add("e-ungroupdrag"),e.bindEvents(e.dragElement)},this.drag=function(e){var n=e.target,o=t.parent.element.querySelector(".e-cloneproperties");t.parent.options.groupReordering||(sf.base.classList(o,["e-defaultcur"],["e-notallowedcur"]),r(n,"e-gridcontent")||r(n,"e-headercell")||sf.base.classList(o,["e-notallowedcur"],["e-defaultcur"]))},this.dragStop=function(e){t.parent.element.classList.remove("e-ungroupdrag"),!(r(e.target,"e-gridcontent")||r(e.target,"e-gridheader"))&&sf.base.remove(e.helper)},this.drop=function(e){var n=t.parent,o=n.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));n.element.querySelector(".e-groupdroparea").classList.remove("e-hover"),sf.base.remove(e.droppedElement),t.parent.element.querySelector(".e-groupdroparea").removeAttribute("aria-dropeffect"),t.parent.element.querySelector("[aria-grabbed=true]").setAttribute("aria-grabbed","false"),sf.base.isNullOrUndefined(o)||!1===o.allowGrouping||r(n.getColumnHeaderByUid(o.uid),"e-grid").getAttribute("id")!==n.element.getAttribute("id")||n.dotNetRef.invokeMethodAsync("GroupColumn",o.field,"Group")},this.parent=e,this.parent.options.allowGrouping&&this.parent.options.showDropArea&&this.initDragAndDrop()}return e.prototype.columnDrag=function(e){this.parent.options.groupReordering;var t=this.parent,n=this.parent.element.querySelector(".e-cloneproperties");sf.base.classList(n,["e-defaultcur"],["e-notallowedcur"]),r(e.target,"e-groupdroparea")||this.parent.options.groupReordering&&r(e.target,"e-headercell")||sf.base.classList(n,["e-notallowedcur"],["e-defaultcur"]),e.target.classList.contains("e-groupdroparea")?t.element.querySelector(".e-groupdroparea").classList.add("e-hover"):t.element.querySelector(".e-groupdroparea").classList.remove("e-hover")},e.prototype.columnDragStart=function(e){if(!e.target.classList.contains("e-stackedheadercell")){var t=this.parent.element.querySelector(".e-groupdroparea");t&&t.setAttribute("aria-dropeffect","copy"),(e.target.classList.contains("e-headercell")?e.target:r(e.target,"e-headercell")).setAttribute("aria-grabbed","true")}},e.prototype.columnDrop=function(e){var t=this.parent;if("grouping"===e.droppedElement.getAttribute("action")){var n=t.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));if(sf.base.isNullOrUndefined(n)||!1===n.allowGrouping||r(t.getColumnHeaderByUid(n.uid),"e-grid").getAttribute("id")!==t.element.getAttribute("id"))return;t.dotNetRef.invokeMethodAsync("GroupColumn",n.field,"Ungroup")}},e.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop(),this.initializeGHeaderDrag()},e.prototype.initializeGHeaderDrag=function(){var e=this.parent.element.querySelector(".e-groupdroparea");if(e)new sf.base.Draggable(e,{dragTarget:this.parent.options.groupReordering?".e-drag":".e-groupheadercell",distance:this.parent.options.groupReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop})},e.prototype.initializeGHeaderDrop=function(){this.parent;var e=this.parent.element.querySelector(".e-groupdroparea");if(e)new sf.base.Droppable(e,{accept:".e-dragclone",drop:this.drop})},e.prototype.getModuleName=function(){return"group"},e.prototype.getGHeaderCell=function(e){return this.element&&this.element.querySelector('[ej-mappingname="'+e+'"]')?this.element.querySelector('[ej-mappingname="'+e+'"]').parentElement:null},e}(),q=function(){function e(e){this.mediaCol=[],this.media={},this.mediaBindInstance={},this.mediaColVisibility={},this.noOfTimesInvokedByMedia=0,this.parent=e}return e.prototype.renderColumnChooser=function(){var e=this.parent.element.querySelector("#"+this.parent.element.id+"_ccdlg");e.style.maxHeight="430px";var t=e.style.display;e.style.display="block";var n=sf.popups.calculateRelativeBasedPosition(this.parent.element.querySelector(".e-cc-toolbar"),e);e.style.display=t;var o,r=n.top+this.parent.element.querySelector(".e-cc-toolbar").getBoundingClientRect().height;o=this.parent.options.enableRtl?this.parent.element.querySelector(".e-columnchooser-btn").offsetLeft:n.left-250+this.parent.element.querySelector(".e-cc-toolbar").clientWidth+2,this.parent.dotNetRef.invokeMethodAsync("GetChooserPosition",o.toString(),r.toString())},e.prototype.setMediaColumns=function(){var e=this.parent.getColumns();if(!sf.base.isNullOrUndefined(e)){for(var t=0;t<e.length;t++)""!==e[t].hideAtMedia&&(sf.base.isNullOrUndefined(e[t].visible)||e[t].visible)&&this.pushMediaColumn(e[t],t);this.parent.dotNetRef.invokeMethodAsync("SetMediaColumnVisibility",{mediaColVisibility:this.mediaColVisibility}),this.mediaColVisibility={}}},e.prototype.pushMediaColumn=function(e,t){this.mediaCol.push(e),this.media[e.uid]=window.matchMedia(e.hideAtMedia),this.mediaQueryUpdate(t,this.media[e.uid],!0),this.mediaBindInstance[t]=this.mediaQueryUpdate.bind(this,t),this.media[e.uid].addListener(this.mediaBindInstance[t])},e.prototype.mediaQueryUpdate=function(e,t,n){var o=this.parent.getColumns()[e];this.mediaCol.some((function(e){return e.uid===o.uid}))&&(this.mediaColVisibility[o.uid]=t.matches,n||(this.noOfTimesInvokedByMedia++,this.noOfTimesInvokedByMedia==this.mediaCol.length&&(this.parent.dotNetRef.invokeMethodAsync("SetMediaColumnVisibility",{mediaColVisibility:this.mediaColVisibility,invokedByMedia:!0}),this.noOfTimesInvokedByMedia=0,this.mediaColVisibility={})))},e.prototype.updateMediaColumns=function(e){for(var t=Object.keys(e),n=function(e){var n=-1;o.mediaCol.some((function(o){return n++,o.uid===t[e]}))?o.mediaCol.splice(n,1):o.pushMediaColumn(o.parent.getColumnByUid(t[e]),o.parent.getColumnIndexByUid(t[e]))},o=this,r=0;r<t.length;r++)n(r)},e.prototype.removeMediaListener=function(){for(var e=0;e<this.mediaCol.length;e++)this.media[this.mediaCol[e].uid].removeListener(this.mediaBindInstance[this.mediaCol[e].index])},e}(),T=function(){function e(e){this.key=null,this.uid=null,this.parent=e}return e.prototype.renderColumnMenu=function(e,t,n){this.key=n,this.uid=e;var o=this.parent.getColumnHeaderByUid(e).querySelector(".e-columnmenu"),r=document.getElementsByClassName("e-grid-column-menu")[0],i=r.getElementsByTagName("ul")[0];if(sf.base.isNullOrUndefined(i))return{Left:1,Top:1};var s={top:0,left:0};i.style.visibility="hidden",r.style.display="block";var l=i.getBoundingClientRect();i.classList.add("e-transparent"),i.style.visibility="",r.style.display="";var a=this.getHeaderCell(o);return sf.base.Browser.isDevice?(s.top=window.innerHeight/2-l.height/2,s.left=window.innerWidth/2-l.width/2):this.parent.options.enableRtl?s=sf.popups.calculatePosition(a,"left","bottom"):(s=sf.popups.calculatePosition(a,"right","bottom")).left-=l.width,t&&sf.base.EventHandler.add(i,"mouseover",this.appendFilter,this),{Left:Math.ceil(s.left),Top:Math.ceil(s.top)}},e.prototype.appendFilter=function(e){var t=this,n=!1;setTimeout((function(){sf.base.closest(e.target,"#"+t.key)&&(t.parent.element.querySelector(".e-filter-popup")||!t.parent.element.querySelector(".e-filter-popup"))||e.target.parentElement.id==t.key&&(t.parent.element.querySelector(".e-filter-popup")||!t.parent.element.querySelector(".e-filter-popup"))?n=!0:!sf.base.closest(e.target,"#"+t.key)&&t.parent.element.querySelector(".e-filter-popup")&&(n=!1),t.parent.dotNetRef.invokeMethodAsync("FilterMouseOverHandler",t.uid,n)}),10)},e.prototype.getHeaderCell=function(e){return sf.base.closest(e,"th.e-headercell")},e}(),I=function(){function e(e){this.parent=e}return e.prototype.filterPopupRender=function(e,t,n,o){var r=this.parent.element.querySelector("#"+e);if(!sf.base.isNullOrUndefined(r))if(o){sf.base.EventHandler.add(r,"mousedown",this.mouseDownHandler,this),r.style.maxHeight="excel"==n?"800px":"350px";var i=document.getElementsByClassName("e-grid-column-menu")[0].getElementsByTagName("ul")[0].querySelector(".e-icon-filter").parentElement,s=this.parent.element.querySelector(".e-filter-popup"),l=this.parent.element.getBoundingClientRect(),a=i.getBoundingClientRect(),d=a.left-l.left,h=a.top-l.top,p=r.style.display;r.style.display="block",l.height<h?h=h-s.offsetHeight+a.height:l.height<h+s.offsetHeight&&(h=l.height-s.offsetHeight),window.innerHeight<s.offsetHeight+h+l.top&&(h=window.innerHeight-s.offsetHeight-l.top),d+=this.parent.options.enableRtl?-s.offsetWidth:a.width,l.width<=d+s.offsetWidth?d-=a.width+s.offsetWidth:d<0&&(d+=s.offsetWidth+a.width),r.style.display=p,this.parent.dotNetRef.invokeMethodAsync("GetFilterIconPosition",d.toString(),h.toString())}else{var c=[].slice.call(this.parent.element.querySelector(".e-headercontent").querySelectorAll("div[e-mappinguid="+t+"]"))[1];r.style.maxHeight="excel"==n?"800px":"350px";p=r.style.display;r.style.display="block";var u=sf.popups.calculateRelativeBasedPosition(c,r);r.style.display=p;d=u.left-250+c.clientWidth;var f=u.top+c.getBoundingClientRect().height-5;d<1?d=250+d-16:d-=4,this.parent.dotNetRef.invokeMethodAsync("GetFilterIconPosition",d.toString(),f.toString())}},e.prototype.mouseDownHandler=function(e){(e&&sf.base.closest(e.target,".e-filter-popup")||e.currentTarget&&e.currentTarget.activeElement&&r(e.currentTarget.activeElement,"e-filter-popup")||r(e.target,"e-popup")||r(e.target,"e-popup-wrapper"))&&!sf.base.Browser.isDevice&&this.parent.dotNetRef.invokeMethodAsync("PreventColumnMenuClose",!0)},e}(),A=function(){function e(e){this.parent=e}return e.prototype.createTooltip=function(e,t){for(var o={},r=0;r<e.length;r++){var i=this.parent.getContent().firstElementChild;this.parent.options.frozenColumns&&(i=this.parent.getContent().querySelector(".e-movablecontent"));var s=e[r].fieldName,l=e[r].message,a=this.parent.element.querySelector("#"+s)||document.querySelector("#"+s),d=i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth,h="Dialog"!==this.parent.options.editMode;if(!this.parent.element.querySelector("#"+s)&&!document.querySelector("#"+s))return;var p=sf.base.closest(a,".e-rowcell"),c=sf.base.closest(a,".e-row"),u=this.parent.getContent().querySelector(".e-frozencontent"),f=void 0,g=!1,m=Math.round(this.parent.getContent().clientHeight/this.parent.getRowHeight())-1,y=[].slice.call(this.parent.getContent().querySelectorAll(".e-row"));"Batch"===this.parent.options.editMode&&m>1&&y.length>=m&&y[y.length-1].getAttribute("aria-rowindex")===c.getAttribute("aria-rowindex")&&(g=!0),h&&(this.parent.options.frozenRows,("Bottom"===this.parent.options.newRowPosition&&t||!sf.base.isNullOrUndefined(p)&&p.classList.contains("e-lastrowcell")&&!c.classList.contains("e-addedrow")||g)&&(f=!0));var v=h?this.parent.getContentTable():document.querySelector("#"+this.parent.element.id+"_dialogEdit_wrapper").querySelector(".e-dlg-content"),b=v.getBoundingClientRect(),C=h?this.parent.element.getBoundingClientRect().left:b.left,w=sf.base.closest(a,"td"),S=w?w.getBoundingClientRect():a.parentElement.getBoundingClientRect(),x=this.parent.element.querySelector("#"+s+"_Error")||document.querySelector("#"+s+"_Error");x.style.top=S.bottom-b.top-(this.parent.options.frozenColumns?u.scrollTop:0)+v.scrollTop+9+"px",x.style.left=S.left-C+v.scrollLeft+S.width/2+"px",x.style.maxWidth=S.width+"px",h&&b.left<C&&(x.style.left=parseInt(x.style.left,10)-b.left+C+"px");var H=void 0;if(H=f?x.querySelector(".e-tip-bottom"):x.querySelector(".e-tip-top"),(this.parent.options.frozenColumns||this.parent.options.frozenRows)&&"Dialog"!==this.parent.options.editMode)("Normal"===this.parent.options.editMode?sf.base.closest(a,".e-editcell"):sf.base.closest(a,".e-table")).style.position="relative",x.style.position="absolute";x.style.display="block",x.querySelector(".e-error").innerText=l,!f&&h&&i.getBoundingClientRect().bottom<S.bottom+S.height&&(i.scrollTop=i.scrollTop+x.offsetHeight+H.scrollHeight);var E=parseInt(document.defaultView.getComputedStyle(x,null).getPropertyValue("font-size"),10);if(x.getBoundingClientRect().width<S.width&&x.querySelector("label").getBoundingClientRect().height/(1.2*E)>=2&&(x.style.width=x.style.maxWidth),!this.parent.options.frozenColumns&&!this.parent.options.frozenRows||"Normal"!==this.parent.options.editMode&&"Batch"!==this.parent.options.editMode?x.style.left=parseInt(x.style.left,10)-x.offsetWidth/2+"px":x.style.left=w.offsetLeft+(w.offsetWidth/2-x.offsetWidth/2)+"px",h&&!d&&!this.parent.options.allowPaging||this.parent.options.frozenColumns||this.parent.options.frozenRows){i.style.position="static";var R=sf.popups.calculateRelativeBasedPosition(w,x);x.style.top=R.top+S.height+9+"px"}if(f){if(!d||this.parent.options.frozenColumns||"auto"===this.parent.options.height||this.parent.options.frozenRows)x.style.bottom=S.height+9+"px";else{var q=i.scrollWidth>i.offsetWidth?n():0;x.style.bottom=parseInt(this.parent.options.height)-i.querySelector("table").offsetHeight-q+S.height+9+"px"}x.style.top=null}x.style.display="none",o[s]="top: "+x.style.top+"; bottom: "+x.style.bottom+"; left: "+x.style.left+"; \n            max-width: "+x.style.maxWidth+"; width: "+x.style.width+"; text-align: center; position: "+x.style.position+";"}this.parent.dotNetRef.invokeMethodAsync("ShowValidationPopup",o)},e}(),z=function(){function e(e){this.copyContent="",this.isSelect=!1,this.parent=e,this.clipBoardTextArea=sf.base.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard","aria-hidden":"true"}}),this.parent.element.appendChild(this.clipBoardTextArea)}return e.prototype.pasteHandler=function(){var e=this,t=this.parent;if(sf.base.closest(document.activeElement,".e-rowcell")&&t.options.allowEditing&&"Batch"===t.options.editMode&&"Cell"===t.options.selectionMode&&"Flow"!==t.options.cellSelectionMode){this.activeElement=document.activeElement,this.clipBoardTextArea.value="";var n=window.scrollX,o=window.scrollY;this.clipBoardTextArea.focus(),setTimeout((function(){e.activeElement.focus(),window.scrollTo(n,o),e.paste(e.clipBoardTextArea.value,e.getSelectedRowCellIndexes()[0].rowIndex,e.getSelectedRowCellIndexes()[0].cellIndexes[0])}),10)}},e.prototype.paste=function(e,t,n){var o,r,i=this.parent,s=n,l=t;if(i.options.allowEditing&&"Batch"===i.options.editMode&&"Cell"===i.options.selectionMode&&"Flow"!==i.options.cellSelectionMode){var a,d,h=e.split("\n"),p=i.getDataRows(),c=this.parent.options.frozenColumns;c&&(d=i.getMovableDataRows());for(var u=0;u<h.length;u++){if(a=h[u].split("\t"),s=n,u===h.length-1&&""===h[u]||sf.base.isUndefined(i.getRowByIndex(l))){s++;break}for(var f=0;f<a.length;f++){if(r=i.getCellFromIndex(l,s),c){var g=p[l],m=d[l];r=!!g.querySelector('[aria-colindex="'+s+'"]')||m.querySelector('[aria-colindex="'+s+'"]')}if(!r){s++;break}!(o=i.getColumnByIndex(s)).allowEditing||o.isPrimaryKey||o.template||i.editModule&&o.type,s++}l++}var y=this.parent.getCellFromIndex(l-1,s-1);y&&sf.base.classList(y,["e-focus","e-focused"],[])}},e.prototype.setCopyData=function(e){if(""===window.getSelection().toString()){var t=this.parent.options.frozenColumns;this.clipBoardTextArea.value=this.copyContent="";var n=void 0,o=this.parent.getRows();if(t&&(n=this.parent.getMovableDataRows()),"Cell"!==this.parent.options.selectionMode){var r=this.parent.getSelectedRowIndexes();if(e){for(var i=[],s=0;s<this.parent.getVisibleColumns().length;s++)i[s]=this.parent.getVisibleColumns()[s].headerText;this.getCopyData(i,!1,"\t",e),this.copyContent+="\n"}for(s=0;s<r.length;s++){s>0&&(this.copyContent+="\n");var l=[].slice.call(o[r[s]].querySelectorAll(".e-rowcell"));t&&l.push.apply(l,[].slice.call(n[r[s]].querySelectorAll(".e-rowcell"))),this.getCopyData(l,!1,"\t",e)}}else{var a=this.checkBoxSelection();if(a.status){if(e){var d=[];for(s=0;s<a.colIndexes.length;s++)d.push(this.parent.getColumnHeaderByIndex(a.colIndexes[s]));this.getCopyData(d,!1,"\t",e),this.copyContent+="\n"}for(s=0;s<a.rowIndexes.length;s++){s>0&&(this.copyContent+="\n");l=[].slice.call(o[a.rowIndexes[s]].querySelectorAll(".e-cellselectionbackground"));t&&l.push.apply(l,[].slice.call(n[a.rowIndexes[s]].querySelectorAll(".e-cellselectionbackground"))),this.getCopyData(l,!1,"\t",e)}}else this.getCopyData([].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),!0,"\n",e)}this.clipBoardTextArea.value=this.copyContent,sf.base.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},e.prototype.getCopyData=function(e,t,n,o){for(var r="string"!=typeof e[0],i=0;i<e.length;i++)o&&t&&(this.copyContent+=this.parent.getColumns()[parseInt(e[i].getAttribute("aria-colindex"),10)].headerText+"\n"),r?e[i].classList.contains("e-hide")||(!e[i].classList.contains("e-gridchkbox")&&Object.keys(e[i].querySelectorAll(".e-check")).length?this.copyContent+=!0:!e[i].classList.contains("e-gridchkbox")&&Object.keys(e[i].querySelectorAll(".e-uncheck")).length?this.copyContent+=!1:this.copyContent+=e[i].innerText):this.copyContent+=e[i],i<e.length-1&&(this.copyContent+=n)},e.prototype.copy=function(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},e.prototype.getSelectedRowCellIndexes=function(){var e,t=this.parent,n=[],o=t.getRows();t.options.frozenColumns&&(e=t.getMovableDataRows());for(var r=function(r){var i=o[r].querySelectorAll(".e-cellselectionbackground");if(t.options.frozenColumns&&!i.length&&(i=e[r].querySelectorAll(".e-cellselectionbackground")),i.length){var s=[];i.forEach((function(e){s.push(parseInt(e.getAttribute("aria-colindex")))})),n.push({rowIndex:r,cellIndexes:s})}},i=0;i<o.length;i++)r(i);return n},e.prototype.checkBoxSelection=function(){var e,t={status:!1};if("Cell"===this.parent.options.selectionMode){e=this.getSelectedRowCellIndexes();var n=void 0,o=[],r=void 0;for(r=0;r<e.length&&(e[r].cellIndexes.length&&o.push(e[r].rowIndex),!e[r].cellIndexes.length||(n||(n=JSON.stringify(e[r].cellIndexes.sort())),n===JSON.stringify(e[r].cellIndexes.sort())));r++);o.sort((function(e,t){return e-t})),r===e.length&&o[o.length-1]-o[0]==o.length-1&&(t={status:!0,rowIndexes:o,colIndexes:e[0].cellIndexes})}return t},e}(),M=function(){function e(e){this.parent=e,this.wireEvents()}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getContent(),"scroll",this.scrollHandler,this),sf.base.EventHandler.add(this.parent.element,"mousemove",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.parent.element,"mouseout",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.parent.element,"keydown",this.onKeyPressed,this)},e.prototype.unWireevents=function(){sf.base.EventHandler.remove(this.parent.getContent(),"scroll",this.scrollHandler),sf.base.EventHandler.remove(this.parent.element,"mousemove",this.mouseMoveHandler),sf.base.EventHandler.remove(this.parent.element,"mouseout",this.mouseMoveHandler),sf.base.EventHandler.remove(this.parent.element,"keydown",this.onKeyPressed)},e.prototype.open=function(e){this.close(),this.ctrlId=sf.base.getUniqueID(this.parent.element.getAttribute("id")),sf.base.isNullOrUndefined(this.toolTipElement)&&(this.toolTipElement=sf.base.createElement("div",{className:"e-tooltip-wrap e-popup e-lib e-control e-popup-open",styles:'width: "auto", height: "auto", position: "absolute"',attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"}})),sf.base.attributes(e,{"aria-describedby":this.ctrlId+"_content","data-tooltip-id":this.ctrlId+"_content"}),this.renderToolTip(),this.setPosition(e)},e.prototype.renderToolTip=function(){var e=sf.base.createElement("div",{className:"e-tip-content"});e.innerHTML=this.content,this.toolTipElement.appendChild(e);var t=sf.base.createElement("div",{className:"e-arrow-tip e-tip-bottom",styles:"top: 99.9%"});t.appendChild(sf.base.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),t.appendChild(sf.base.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom",styles:"top: -6px"})),this.toolTipElement.appendChild(t),document.body.appendChild(this.toolTipElement)},e.prototype.setPosition=function(e){var t=this.toolTipElement.querySelector(".e-arrow-tip"),n=sf.popups.calculateRelativeBasedPosition(e,this.parent.element);this.toolTipElement.style.top=n.top-t.offsetHeight-this.toolTipElement.offsetHeight+"px";var o=this.toolTipElement.offsetWidth/2;this.toolTipElement.style.left=n.left+e.offsetWidth/2-o+"px",t.style.left=o-t.offsetWidth/2+"px"},e.prototype.close=function(){if(this.toolTipElement){var e=this.parent.element.querySelector('[aria-describedby="'+this.ctrlId+'_content"]');e.removeAttribute("aria-describedby"),e.removeAttribute("data-tooltip-id"),document.getElementById(this.ctrlId+"_content").remove(),this.toolTipElement=null}},e.prototype.getTooltipStatus=function(e){var t,n=this.parent.getHeaderTable(),o=this.parent.getContentTable(),r=this.createTable(n,"e-gridheader","header"),i=this.createTable(o,"e-gridcontent","content"),s=e.classList.contains("e-headercell")?r:i,l=e.classList.contains("e-headercell")?"th":"tr";return s.querySelector(l).className=e.className,s.querySelector(l).innerHTML=e.innerHTML,t=s.querySelector(l).getBoundingClientRect().width,document.body.removeChild(r),document.body.removeChild(i),t>e.getBoundingClientRect().width},e.prototype.mouseMoveHandler=function(e){if(this.isEllipsisTooltip()){var t=r(e.target,"e-ellipsistooltip");this.prevElement===t&&"mouseout"!==e.type||this.close();var n=e.target.tagName;if(t&&"mouseout"!==e.type&&(!sf.base.Browser.isDevice||-1===["A","BUTTON","INPUT"].indexOf(n))){if(t.getAttribute("aria-describedby"))return;this.getTooltipStatus(t)&&(t.getElementsByClassName("e-headertext").length?this.content=t.getElementsByClassName("e-headertext")[0].innerText:this.content=t.innerText,this.prevElement=t,this.open(t))}}this.hoverFrozenRows(e)},e.prototype.hoverFrozenRows=function(e){if(this.parent.options.frozenColumns){var t=r(e.target,"e-row"),n=[].slice.call(this.parent.element.querySelectorAll(".e-frozenhover"));if(n.length&&"mouseout"===e.type)for(var o=0;o<n.length;o++)n[o].classList.remove("e-frozenhover");else if(t){var i=[].slice.call(this.parent.element.querySelectorAll('tr[aria-rowindex="'+t.getAttribute("aria-rowindex")+'"]'));i.splice(i.indexOf(t),1),"true"!=t.getAttribute("aria-selected")?i[0].classList.add("e-frozenhover"):i[0].classList.remove("e-frozenhover")}}},e.prototype.isEllipsisTooltip=function(){var e=this.parent.getColumns();if("EllipsisWithTooltip"===this.parent.options.clipMode)return!0;for(var t=0;t<e.length;t++)if("EllipsisWithTooltip"===e[t].clipMode)return!0;return!1},e.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.close()},e.prototype.createTable=function(e,t,n){var o=sf.base.createElement("div");o.className=this.parent.element.className,o.style.cssText="display: inline-block;visibility:hidden;position:absolute";var r=sf.base.createElement("div");r.className=t;var i=sf.base.createElement("table");i.className=e.className,i.style.cssText="table-layout: auto;width: auto";var s="header"===n?"th":"td",l=sf.base.createElement("tr"),a=sf.base.createElement(s);return l.appendChild(a),i.appendChild(l),r.appendChild(i),o.appendChild(r),document.body.appendChild(o),o},e.prototype.onKeyPressed=function(e){"Tab"!==e.key&&"ShiftTab"!==e.key||this.close()},e.prototype.destroy=function(){this.close(),this.unWireevents()},e}(),B=function(){function e(e){var t=this;this.isOverflowBorder=!0,this.helper=function(e){var n=t.parent,o=t.draggable.currentStateTarget,i=sf.base.createElement("div",{className:"e-cloneproperties e-draganddrop e-grid e-dragclone",styles:'height:"auto", z-index:2, width:'+n.element.offsetWidth}),s=sf.base.createElement("table",{styles:"width:"+n.element.offsetWidth}),l=sf.base.createElement("tbody");if(document.getElementsByClassName("e-griddragarea").length||n.options.rowDropTarget&&!e.sender.target.classList.contains("e-selectionbackground")&&"Single"!==n.options.selectionType||!n.options.rowDropTarget&&!r(e.sender.target,"e-rowdragdrop"))return!1;n.options.rowDropTarget&&"Row"===n.options.selectionMode&&"Single"===n.options.selectionType&&n.dotNetRef.invokeMethodAsync("SelectRow",parseInt(t.draggable.currentStateTarget.parentElement.getAttribute("aria-rowindex"),10)),t.startedRow=sf.base.closest(o,"tr").cloneNode(!0);var a=n.getSelectedRows();p(t.startedRow,".e-indentcell"),p(t.startedRow,".e-detailrowcollapse"),p(t.startedRow,".e-detailrowexpand"),t.removeCell(t.startedRow,"e-gridchkbox");var d=new RegExp("e-active","g");if(t.startedRow.innerHTML=t.startedRow.innerHTML.replace(d,""),l.appendChild(t.startedRow),n.getSelectedRows().length>1&&t.startedRow.hasAttribute("aria-selected")){var h=sf.base.createElement("span",{className:"e-dropitemscount",innerHTML:""+a.length});i.appendChild(h)}var c=sf.base.closest(o,"tr").querySelector(".e-icon-rowdragicon");return c&&c.classList.add("e-dragstartrow"),s.appendChild(l),i.appendChild(s),n.element.appendChild(i),i},this.dragStart=function(e){var n=t.parent;if(!document.getElementsByClassName("e-griddragarea").length){var o=t.parent.element.querySelector(".e-dropitemscount");t.parent.getSelectedRows().length>1&&o&&(o.style.left=t.parent.element.querySelector(".e-cloneproperties table").offsetWidth-5+"px");var r=parseInt(t.startedRow.getAttribute("aria-rowindex"),10);t.parent.dotNetRef.invokeMethodAsync("RowDragStartEvent",r),e.bindEvents(e.dragElement),t.dragStartData=t.rowData;var i=document.getElementById(n.options.rowDropTarget);n.options.rowDropTarget&&i&&i.blazor__instance&&"grid"===i.blazor__instance.getModuleName()&&i.blazor__instance.getContent().classList.add("e-allowRowDrop")}},this.drag=function(e){var n=t.parent,o=t.parent.element.querySelector(".e-cloneproperties"),i=t.getElementFromPosition(o,e.event);sf.base.classList(o,["e-defaultcur"],["e-notallowedcur","e-movecur"]),t.isOverflowBorder=!0;var s=r(i,"e-grid")?sf.base.closest(e.target,"tr"):null;if(e.target){if(t.stopTimer(),n.element.classList.add("e-rowdrag"),t.dragTarget=s&&r(i,"e-grid").id===o.parentElement.id?s.rowIndex:parseInt(t.startedRow.getAttribute("aria-rowindex"),10),n.options.rowDropTarget)r(i,"e-gridcontent")&&r(o.parentElement,"e-grid").id!==r(i,"e-grid").id?sf.base.classList(o,["e-defaultcur"],["e-notallowedcur"]):sf.base.classList(o,["e-notallowedcur"],["e-defaultcur"]);else{var l=r(i,"e-grid");l&&l.id===o.parentElement.id?sf.base.classList(o,["e-movecur"],["e-defaultcur"]):sf.base.classList(o,["e-notallowedcur"],["e-movecur"])}if(!n.options.rowDropTarget&&(!n.options.groupCount||e.target.classList.contains("e-selectionbackground")))if(r(i,"e-grid")&&t.updateScrollPostion(e.event,i),t.isOverflowBorder&&parseInt(t.startedRow.getAttribute("aria-rowindex"),10)!==t.dragTarget)t.moveDragRows(e,t.startedRow,s);else{if(s&&t.parent.getRowByIndex(t.parent.getRows().length-1).getAttribute("data-uid")===s.getAttribute("data-uid")){var a=sf.base.createElement("div",{className:"e-lastrow-dragborder"}),d=t.parent.getContent();a.style.width=t.parent.element.offsetWidth-t.getScrollWidth()+"px",d.querySelectorAll(".e-lastrow-dragborder").length||(d.classList.add("e-grid-relative"),d.appendChild(a),a.style.bottom=t.getScrollWidth()+"px")}t.removeBorder(s)}}},this.dragStop=function(e){d(t.parent.element)||t.processDragStop(e)},this.processDragStop=function(e){var n=t.parent,o=t.getElementFromPosition(e.helper,e.event),i=o&&!o.classList.contains("e-dlg-overlay")?o:e.target;n.element.classList.remove("e-rowdrag");var s=document.getElementById(n.options.rowDropTarget);if(n.options.rowDropTarget&&s&&s.blazor__instance&&"grid"===s.blazor__instance.getModuleName()&&s.blazor__instance.getContent().classList.remove("e-allowRowDrop"),!r(i,"e-gridcontent"))return t.dragTarget=null,void sf.base.remove(e.helper);if(t.parent.options.allowRowDragAndDrop&&!t.parent.options.rowDropTarget){t.stopTimer(),t.parent.getContent().classList.remove("e-grid-relative"),t.removeBorder(o);var l=n.element.querySelector(".e-dragstartrow");l&&l.classList.remove("e-dragstartrow");var a=t.dragTarget,d=i.classList.value,h=i.id,p=parseInt(t.startedRow.getAttribute("aria-rowindex"),10);n.dotNetRef.invokeMethodAsync("ReorderRows",p,a,"delete",!0,d,h,null),t.dragTarget=null}},this.removeCell=function(e,t){return[].slice.call(e.querySelectorAll("td")).filter((function(n){n.classList.contains(t)&&e.deleteCell(n.cellIndex)}))},this.drop=function(e){t.columnDrop({target:e.target,droppedElement:e.droppedElement}),sf.base.remove(e.droppedElement)},this.parent=e,this.parent.options.allowRowDragAndDrop&&this.initializeDrag()}return e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.initializeDrag=function(){var e=this.parent;this.draggable=new sf.base.Draggable(e.getContent(),{dragTarget:".e-rowcelldrag, .e-rowdragdrop, .e-rowcell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop});new sf.base.Droppable(e.getContent(),{accept:".e-dragclone",drop:this.drop})},e.prototype.updateScrollPostion=function(e,t){var n=this,o=this.parent.options.frozenColumns,r=l(e).y,i=this.parent.getContent().getBoundingClientRect(),s=this.parent.getRowHeight()-15,a=o?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent().firstElementChild;if(i.top+s>=r){var d=-this.parent.getRowHeight();this.isOverflowBorder=!1,this.timer=window.setInterval((function(){n.setScrollDown(a,d,!0)}),200)}else if(i.top+this.parent.getContent().clientHeight-s-33<=r){var h=this.parent.getRowHeight();this.isOverflowBorder=!1,this.timer=window.setInterval((function(){n.setScrollDown(a,h,!0)}),200)}},e.prototype.setScrollDown=function(e,t,n){e.scrollTop=e.scrollTop+t},e.prototype.moveDragRows=function(e,t,n){var o=this.parent.element.querySelector(".e-cloneproperties"),i=sf.base.closest(e.target,"tr");if(r(i,"e-gridcontent")&&r(o.parentElement,"e-grid").id===r(i,"e-grid").id){var s=i||this.startedRow;this.setBorder(s,e.event,t,n)}},e.prototype.setBorder=function(e,t,n,o){var i=this.parent.element,s=this.parent.element.querySelector(".e-cloneproperties");if(this.removeFirstRowBorder(e),this.removeLastRowBorder(e),r(e,"e-gridcontent")&&r(s.parentElement,"e-grid").id===r(e,"e-grid").id){sf.base.removeClass(i.querySelectorAll(".e-rowcell,.e-rowdragdrop"),["e-dragborder"]);var l=[];if(o&&0===o.rowIndex){var a=sf.base.createElement("div",{className:"e-firstrow-dragborder"}),d=this.parent.getHeaderContent();d.classList.add("e-grid-relative"),a.style.width=i.offsetWidth-this.getScrollWidth()+"px",d.querySelectorAll(".e-firstrow-dragborder").length||d.appendChild(a)}else o&&parseInt(n.getAttribute("aria-rowindex"),10)>o.rowIndex?(e=this.parent.getRowByIndex(o.rowIndex-1),l=[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))):l=[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"));l.length>0&&c(l,!0,"e-dragborder")}},e.prototype.getScrollWidth=function(){var e=this.parent.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?n():0},e.prototype.removeFirstRowBorder=function(e){this.parent.element.getElementsByClassName("e-firstrow-dragborder").length>0&&e&&0!==e.rowIndex&&this.parent.element.getElementsByClassName("e-firstrow-dragborder")[0].remove()},e.prototype.removeLastRowBorder=function(e){var t=e&&this.parent.getRowByIndex(this.parent.getRows().length-1).getAttribute("data-uid")!==e.getAttribute("data-uid");this.parent.element.getElementsByClassName("e-lastrow-dragborder").length>0&&e&&t&&this.parent.element.getElementsByClassName("e-lastrow-dragborder")[0].remove()},e.prototype.removeBorder=function(e){(this.removeFirstRowBorder(e),this.removeLastRowBorder(e),e=this.parent.getRows().filter((function(e){return e.querySelector("td.e-dragborder")}))[0])&&c([].slice.call(e.querySelectorAll(".e-dragborder")),!1,"e-dragborder")},e.prototype.getElementFromPosition=function(e,t){var n,o=l(t);return e.style.display="none",n=document.elementFromPoint(o.x,o.y),e.style.display="",n},e.prototype.getTargetIdx=function(e){return e?parseInt(e.getAttribute("aria-rowindex"),10):0},e.prototype.columnDrop=function(e){var t=this.parent;if("grouping"!==e.droppedElement.getAttribute("action")){var n=sf.base.closest(e.target,"tr"),o=void 0;if("true"!==e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.id===t.element.id||"true"===e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.id!==t.element.id)return;if(e.droppedElement.parentElement.id!==t.element.id&&(o=e.droppedElement.parentElement.blazor__instance),o.element.id!==t.element.id&&o.options.rowDropTarget!==t.element.id)return;var r=this.getTargetIdx(n);isNaN(r)&&(r=0),t.options.allowPaging&&(r=r+t.options.currentPage*t.options.pageSize-t.options.pageSize);var i=e.target.classList.value,s=e.target.id;t.dotNetRef.invokeMethodAsync("ReorderRows",0,r,"add",!1,i,s,o.dotNetRef),o.dotNetRef.invokeMethodAsync("ReorderRows",0,r,"delete",!1,i,s,null)}},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&this.draggable.destroy()},e}(),D=function(){function e(e){this.prevStartDIndex=void 0,this.prevEndIndex=void 0,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){sf.base.EventHandler.add(this.parent.getContent().parentElement,"mousedown",this.mouseDownHandler,this)},e.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.parent.getContent().parentElement,"mousedown",this.mouseDownHandler)},e.prototype.mouseDownHandler=function(e){var t,n=e.target,o=this.parent,i=r(n,"e-grid");if(!(i&&i.id!==o.element.id||r(n,"e-headercontent")&&!this.parent.options.frozenRows)&&((e.shiftKey||e.ctrlKey)&&e.preventDefault(),r(n,"e-rowcell")&&!e.shiftKey&&!e.ctrlKey)){if(o.options.allowRowDragAndDrop&&!o.options.isEdit){if(!this.isRowType()||this.isSingleSel()||sf.base.closest(n,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);t=!0,this.element=sf.base.createElement("div",{className:"e-griddragarea"}),o.getContent().appendChild(this.element)}t&&this.enableDrag(e,!0)}},e.prototype.mouseUpHandler=function(e){document.body.classList.remove("e-disableuserselect"),this.element&&sf.base.remove(this.element),sf.base.isNullOrUndefined(this.prevStartDIndex)&&sf.base.isNullOrUndefined(this.prevEndIndex)||this.parent.dotNetRef.invokeMethodAsync("DragSelection",this.prevStartDIndex,this.prevEndIndex,!1),this.isDragged=!1,this.prevStartDIndex=void 0,this.prevEndIndex=void 0,sf.base.EventHandler.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.options.frozenRows&&sf.base.EventHandler.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),sf.base.EventHandler.remove(document.body,"mouseup",this.mouseUpHandler)},e.prototype.enableDrag=function(e,t){var n=this.parent;if(t){var o=sf.base.closest(e.target,"tr");this.startDIndex=parseInt(o.getAttribute("aria-rowindex"),10),this.startDCellIndex=parseInt(r(e.target,"e-rowcell").getAttribute("aria-colindex"),10)}document.body.classList.add("e-disableuserselect");var i=n.element.getBoundingClientRect(),s=l(e);this.x=s.x-i.left,this.y=s.y-i.top,sf.base.EventHandler.add(n.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.options.frozenRows&&sf.base.EventHandler.add(n.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),sf.base.EventHandler.add(document.body,"mouseup",this.mouseUpHandler,this)},e.prototype.mouseMoveHandler=function(e){e.preventDefault();var t,n=this.parent.element.getBoundingClientRect(),o=this.x,r=this.y,i=l(e),s=i.x-n.left,a=i.y-n.top,d=sf.base.closest(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(d||(d=sf.base.closest(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),o>s&&(t=s,s=o,o=t),r>a&&(t=a,a=r,r=t),this.element.style.left=o+"px",this.element.style.top=r-this.parent.getRowHeight()+"px",this.element.style.width=s-o+"px",this.element.style.height=a-r+"px"),d&&!e.ctrlKey&&!e.shiftKey){var h=parseInt(d.getAttribute("aria-rowindex"),10);if(!this.isCellDrag&&(sf.base.isNullOrUndefined(this.prevStartDIndex)||this.prevStartDIndex!=this.startDIndex||this.prevEndIndex!=h)){var p=-1,c=!1,u=this.parent.getSelectedRowIndexes();sf.base.isNullOrUndefined(this.prevStartDIndex)?(p=-1,c=!0):(h>=this.prevStartDIndex&&u.indexOf(h)>=0||this.prevStartDIndex>h&&u.indexOf(this.startDIndex)>=0)&&(p=this.prevEndIndex),this.prevStartDIndex=this.startDIndex,this.prevEndIndex=h,c?this.parent.dotNetRef.invokeMethodAsync("DragSelection",this.startDIndex,h,!0):this.performDragSelection(this.startDIndex,h,p)}}},e.prototype.performDragSelection=function(e,t,n){var o=e,r=t;e>t&&(o=t,r=e),-1!=n&&this.clearSelectionExceptDragIndexes(o,r),this.selectRangeOfRows(o,r)},e.prototype.selectRangeOfRows=function(e,t){for(var n=this.parent.getRows(),o=e;o<=t;o++){n[o].setAttribute("aria-selected","true");var r=[].slice.call(n[o].querySelectorAll(".e-rowcell"));c.apply(void 0,[r,!0].concat(["e-aria-selected","e-active"]))}},e.prototype.clearSelectionByRow=function(e){var t=[].slice.call(e.querySelectorAll(".e-rowcell"));e.removeAttribute("aria-selected"),c.apply(void 0,[t,!1].concat(["e-aria-selected","e-active"]))},e.prototype.clearSelectionExceptDragIndexes=function(e,t){for(var n=this.parent.getRows(),o=0;o<n.length;o++)(o<e||o>t)&&this.clearSelectionByRow(n[o])},e.prototype.isRowType=function(){return"Row"===this.parent.options.selectionMode||"Both"===this.parent.options.selectionMode},e.prototype.isSingleSel=function(){return"Single"===this.parent.options.selectionType},e}(),k=function(){function e(e,t){var n=this;this.fromWheel=!1,this.touchMove=!1,this.options={},this.sentinelInfo={up:{check:function(e,t){var o=e.top-n.containerRect.top;return t.entered=o>=0,o+n.options.pageHeight/2>=0},axis:"Y"},down:{check:function(e,t){n.options.container.clientHeight;var o=e.bottom;return t.entered=e.bottom<=n.containerRect.bottom,o-n.options.pageHeight/2<=n.options.pageHeight/2},axis:"Y"},right:{check:function(e,t){var o=e.right;return t.entered=o<n.containerRect.right,o-n.containerRect.width<=n.containerRect.right},axis:"X"},left:{check:function(e,t){var o=e.left;return t.entered=o>0,o+n.containerRect.width>=n.containerRect.left},axis:"X"}},this.element=e,this.options=t}return e.prototype.observe=function(e,t){var n=this;this.containerRect=this.options.container.getBoundingClientRect(),sf.base.EventHandler.add(this.options.container,"wheel",(function(){return n.fromWheel=!0}),this),sf.base.EventHandler.add(this.options.container,"scroll",this.virtualScrollHandler(e,t),this)},e.prototype.check=function(e){var t=this.sentinelInfo[e];return t.check(this.element.getBoundingClientRect(),t)},e.prototype.virtualScrollHandler=function(e,t){var n=this,o="chrome"===sf.base.Browser.info.name?200:100,r=0,i=0,s=sf.base.debounce(e,o),l=sf.base.debounce(e,50);return function(e){var o=e.target.scrollTop,a=e.target.scrollLeft,d=r<o?"down":"up";d=i===a?d:i<a?"right":"left",r=o,i=a;var h=n.sentinelInfo[d];if(-1!==n.options.axes.indexOf(h.axis)){var p=n.check(d);if(h.entered&&t(n.element,h,d,{top:o,left:a},n.fromWheel,p),p){var c=s;"X"===h.axis&&(c=l),c({direction:d,sentinel:h,offset:{top:o,left:a},focusElement:document.activeElement})}n.fromWheel=!1}}},e.prototype.setPageHeight=function(e){this.options.pageHeight=e},e}(),W=function(){function e(e){var t=this;this.prevHeight=0,this.preStartIndex=0,this.preventEvent=!1,this.actions=["filtering","searching","grouping","ungrouping","Filtering","Searching","Grouping","Ungrouping"],this.offsets={},this.tmpOffsets={},this.offsetKeys=[],this.currentInfo={},this.blazorActiveKey="",this.nextRowToNavigate=0,this.virtualEle=new L,this.startIndex=0,this.bindScrollEvent=function(){t.observer.observe((function(e){return t.scrollListener(e)}),t.onEntered());var e=t.parent;if(e.options.enablePersistence&&e.scrollPosition){t.content.scrollTop=e.scrollPosition.top;var n={direction:"down",sentinel:t.observer.sentinelInfo.down,offset:e.scrollPosition,focusElement:e.element};t.scrollListener(n),e.options.enableColumnVirtualization&&(t.content.scrollLeft=e.scrollPosition.left)}},this.parent=e,this.contentPanel=this.parent.element.querySelector(".e-gridcontent"),this.vHelper=new P(e),this.addEventListener()}return e.prototype.getPanel=function(){return this.contentPanel},e.prototype.getTable=function(){return this.contentPanel.querySelector(".e-table")},e.prototype.renderTable=function(){this.header=this.parent.virtualHeaderModule,this.virtualEle.table=this.getTable(),this.virtualEle.content=this.content=this.getPanel().querySelector(".e-content"),this.virtualEle.renderWrapper(Number(this.parent.options.height)),this.virtualEle.renderPlaceHolder();var e={container:this.content,pageHeight:2*this.getBlockHeight(),debounceEvent:!0,axes:this.parent.options.enableColumnVirtualization?["X","Y"]:["Y"]};this.observer=new k(this.virtualEle.wrapper,e),this.parent.dotNetRef.invokeMethodAsync("SetRowHeight",this.parent.getRowHeight())},e.prototype.addEventListener=function(){sf.base.EventHandler.add(this.parent.element,"keydown",this.keyDownHandler,this)},e.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.parent.element,"keydown",this.keyDownHandler)},e.prototype.ensurePageSize=function(){var e=this.parent.getRowHeight(),t=2*~~((this.parent.options.height.toString().indexOf("%")<0?this.parent.options.height:this.parent.element.getBoundingClientRect().height)/e),n=this.parent.options.pageSize,o=n<t?t:n;this.parent.dotNetRef.invokeMethodAsync("SetPageSizeAndCIndex",{pageSize:o,startColumnIndex:this.startColIndex,endColumnIndex:this.endColIndex,VTableWidth:this.getColumnOffset(this.endColIndex)-this.getColumnOffset(this.startColIndex-1)+""}),this.parent.options.pageSize=o,this.observer.options.pageHeight=2*this.getBlockHeight()},e.prototype.scrollListener=function(e){if(this.parent.options.enablePersistence&&(this.parent.scrollPosition=e.offset),this.preventEvent)this.preventEvent=!1;else{var t=e.sentinel,n=this.preStartIndex,o=this.parent.getColumnIndexesInView(),r=this.currentInfo=this.getInfoFromView(e.direction,t,e.offset);if(this.parent.options.enableColumnVirtualization&&JSON.stringify(o)!==JSON.stringify(r.columnIndexes)){var i=this.getColumnOffset(this.startColIndex-1),s=this.getColumnOffset(this.endColIndex)-i+"";this.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",{requestType:"virtualscroll",startColumnIndex:r.columnIndexes[0],endColumnIndex:r.columnIndexes[r.columnIndexes.length-1],axis:"X",VTablewidth:s,translateX:this.getColumnOffset(r.columnIndexes[0]-1)}),this.setColVTableWidthAndTranslate()}this.parent.setColumnIndexesInView(this.parent.options.enableColumnVirtualization?r.columnIndexes:[]),this.nextRowToNavigate=""!=this.blazorActiveKey?this.nextRowToNavigate:0,this.preStartIndex!==n&&(this.parent.options.currentPage=r.currentPage,this.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",{requestType:"virtualscroll",nextRowToNavigate:this.nextRowToNavigate,virtualStartIndex:r.startIndex,virtualEndIndex:r.endIndex,axis:"Y",RHeight:this.parent.getRowHeight()})),this.prevInfo=r,this.blazorActiveKey=""}},e.prototype.setColVTableWidthAndTranslate=function(e){if(this.parent.options.enableColumnVirtualization&&this.prevInfo&&JSON.stringify(this.currentInfo.columnIndexes)!==JSON.stringify(this.prevInfo.columnIndexes)||e&&e.refresh){var t=this.getColumnOffset(this.startColIndex-1),n=this.getColumnOffset(this.endColIndex)-t+"";this.header.virtualEle.setWrapperWidth(n),this.virtualEle.setWrapperWidth(n),this.header.virtualEle.adjustTable(t,0),this.parent.getContentTable().parentElement.style.width=n+"px"}},e.prototype.refreshOnDataChange=function(){this.getPanel().firstElementChild.scrollTop=0,this.getPanel().firstElementChild.scrollLeft=0,this.parent.options.enableColumnVirtualization&&this.header.virtualEle.adjustTable(0,0),this.virtualEle.adjustTable(0,0),this.refreshOffsets(),this.refreshVirtualElement()},e.prototype.keyDownHandler=function(e){this.blazorActiveKey="ArrowDown"===e.key||"ArrowUp"===e.key?e.key:""},e.prototype.focusCell=function(e,t){e.focus({preventScroll:!0});var o=this.parent.getRowHeight(),r=this.parent.getContent();"MoveDownCell"==t&&e.getBoundingClientRect().bottom>r.getBoundingClientRect().top+r.getBoundingClientRect().height-n()?r.scrollTop=r.scrollTop+o:"MoveUpCell"==t&&e.getBoundingClientRect().bottom<r.getBoundingClientRect().top+o&&(this.isScrollFromFocus=!0,r.scrollTop=r.scrollTop-o)},e.prototype.getInfoFromView=function(e,t,n){var o={direction:e,sentinelInfo:t,offsets:n,startIndex:this.preStartIndex,endIndex:this.preEndIndex},r=this.parent.options.height.toString().indexOf("%")<0?this.content.getBoundingClientRect().height:this.parent.element.getBoundingClientRect().height;o.page=this.getPageFromTop(n.top+r,o),o.blockIndexes=this.vHelper.getBlockIndexes(o.page),o.columnIndexes="X"===t.axis?this.vHelper.getColumnIndexes():this.parent.getColumnIndexesInView();var i=this.parent.getRowHeight(),s=n.top/i,l=r/i,a=s+l,d=this.parent.options.pageSize/4,h=this.parent.options.groupCount?this.getVisibleGroupedRowCount():this.count;if("down"!==o.direction||this.isScrollFromFocus){if("up"===o.direction){if(o.startIndex&&o.endIndex)if(s<Math.round((o.startIndex*i+d*i)/i)){var p=d>l?d:l+l/4;u=Math.round(s+p);o.endIndex=u<h?u:h;c=o.endIndex-this.parent.options.pageSize;o.startIndex=c>0?c:0,o.endIndex=c<0?this.parent.options.pageSize:o.endIndex,o.currentPage=Math.ceil(o.startIndex/this.parent.options.pageSize),this.nextRowToNavigate=Math.ceil(s+1)}}}else{var c=Math.round(a)-Math.round(d);if(sf.base.isNullOrUndefined(o.startIndex)||a>o.startIndex+Math.round(this.parent.options.pageSize/2+d)&&o.endIndex!==h){o.startIndex=c>=0?Math.round(c):0,o.startIndex=o.startIndex>s?Math.floor(s):o.startIndex;var u=o.startIndex+this.parent.options.pageSize;o.startIndex=u<a?Math.ceil(a)-this.parent.options.pageSize:o.startIndex,o.endIndex=u<h?u:h,o.startIndex=u>=h?o.endIndex-this.parent.options.pageSize:o.startIndex,o.currentPage=Math.ceil(o.endIndex/this.parent.options.pageSize),this.nextRowToNavigate=Math.floor(a-1)}}return this.isScrollFromFocus=!1,this.preStartIndex=this.startIndex=o.startIndex,this.preEndIndex=o.endIndex,o},e.prototype.onDataReady=function(){var e=this;this.bindScrollEvent(),this.count=this.parent.options.totalItemCount,this.maxPage=Math.ceil(this.count/this.parent.options.pageSize),["Refresh","Filtering","Searching","Grouping","Ungrouping","Reorder","refresh","filtering","searching","grouping","ungrouping","reorder",null].some((function(t){return e.parent.options.requestType===t}))&&this.refreshOffsets(),this.setVirtualHeight(),this.resetScrollPosition(this.parent.options.requestType),this.setColVTableWidthAndTranslate(),this.prevInfo=this.prevInfo?this.prevInfo:this.vHelper.getData()},e.prototype.setVirtualHeight=function(){var e=this.parent.options.enableColumnVirtualization?this.getColumnOffset(this.parent.options.columns.length+this.parent.options.groupCount-1)+"px":"100%",t=this.parent.options.groupCount?this.parent.options.visibleGroupedRowsCount*this.parent.getRowHeight():this.offsets[this.getTotalBlocks()];this.virtualEle.setVirtualHeight(t,e),this.parent.options.enableColumnVirtualization&&this.header.virtualEle.setVirtualHeight(1,e)},e.prototype.getPageFromTop=function(e,t){var n=this,o=h(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks(),r=0;this.offsets[o],this.prevHeight;return this.offsetKeys.some((function(i){var s=Number(i),l=e<=n.offsets[i]||s===o&&e>n.offsets[i];return l&&(t.block=s%2==0?1:0,r=Math.max(1,Math.min(n.vHelper.getPage(s),n.maxPage))),l})),r},e.prototype.getTranslateY=function(e,t,n,o){void 0===n&&((n={page:this.getPageFromTop(e+t,{})}).blockIndexes=this.vHelper.getBlockIndexes(n.page));var r=(n.blockIndexes[0]||1)-1,i=this.getOffset(r),s=this.getOffset(n.blockIndexes[n.blockIndexes.length-1]);o&&(n=this.prevInfo);var l=i>e?this.getOffset(r-1):s<e+t?this.getOffset(r+1):i,a=this.offsets[n.blockIndexes[n.blockIndexes.length-1]]-this.tmpOffsets[n.blockIndexes[0]];return l+a>this.offsets[h(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks()]&&0==this.parent.options.groupCount&&(l-=l+a-this.offsets[this.getTotalBlocks()]),l},e.prototype.getOffset=function(e){return Math.min(0|this.offsets[e],0|this.offsets[this.maxBlock])},e.prototype.onEntered=function(){var e=this;return function(t,n,o,r,i,s){sf.base.Browser.isIE&&!i&&s&&e.preventEvent;var l="X"===n.axis,a=e.prevInfo.offsets?e.prevInfo.offsets.top:null,d=e.content.getBoundingClientRect().height,h=e.getColumnOffset(l?e.vHelper.getColumnIndexes()[0]-1:e.prevInfo.columnIndexes[0]-1),p=e.getTranslateY(r.top,d,l&&a===r.top?e.prevInfo:void 0,!0);e.currentInfo&&e.currentInfo.startIndex&&l&&(p=e.currentInfo.startIndex*e.parent.getRowHeight()),e.virtualEle.adjustTable(h,Math.min(p,e.offsets[e.maxBlock])),l&&e.setColVTableWidthAndTranslate({refresh:!0})}},e.prototype.getBlockSize=function(){return this.parent.options.pageSize>>1},e.prototype.getBlockHeight=function(){return this.getBlockSize()*this.parent.getRowHeight()},e.prototype.getGroupedTotalBlocks=function(){var e=this.getVisibleGroupedRowCount();return Math.floor(e/this.getBlockSize()<1?1:e/this.getBlockSize())},e.prototype.getVisibleGroupedRowCount=function(){return Number(this.virtualEle.placeholder.style.height.substring(0,this.virtualEle.placeholder.style.height.indexOf("p")))/this.parent.getRowHeight()},e.prototype.getTotalBlocks=function(){return Math.ceil(this.count/this.getBlockSize())},e.prototype.getColumnOffset=function(e){return 0|this.vHelper.cOffsets[e]},e.prototype.resetScrollPosition=function(e){if(this.actions.some((function(t){return t===e}))){var t=this.content;this.preventEvent=0!==t.scrollTop,t.scrollTop=0}},e.prototype.refreshOffsets=function(){this.parent;var e=0,t=this.getBlockSize(),n=h(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks();this.prevHeight=this.offsets[n],this.maxBlock=n%2==0?n-2:n-1,this.offsets={};for(var o=[],r={},i=Array.apply(null,Array(n)).map((function(){return++e})),s=0;s<i.length;s++){var l=(r[i[s]]||[]).length,a=h(this.parent)?o.length%t:this.count%t,d=!h(this.parent)&&i[s]in r?l*this.parent.getRowHeight():a&&i[s]===n?a*this.parent.getRowHeight():this.getBlockHeight();this.offsets[i[s]]=(0|this.offsets[i[s]-1])+d,this.tmpOffsets[i[s]]=0|this.offsets[i[s]-1]}this.offsetKeys=Object.keys(this.offsets),this.parent.options.enableColumnVirtualization&&this.vHelper.refreshColOffsets()},e.prototype.refreshColumnIndexes=function(){this.vHelper.refreshColOffsets();var e=this.vHelper.getColumnIndexes();this.parent.setColumnIndexesInView(e),this.parent.dotNetRef.invokeMethodAsync("SetColumnIndexes",e[0],e[e.length-1])},e.prototype.refreshVirtualElement=function(){this.vHelper.refreshColOffsets(),this.setVirtualHeight()},e}(),N=function(){function e(e){this.virtualEle=new L,this.parent=e,this.vHelper=new P(this.parent),this.headerPanel=this.parent.element.querySelector(".e-gridheader")}return e.prototype.getPanel=function(){return this.headerPanel},e.prototype.getTable=function(){return this.headerPanel.querySelector(".e-table")},e.prototype.renderTable=function(){this.vHelper.refreshColOffsets(),this.parent.setColumnIndexesInView(this.vHelper.getColumnIndexes(this.getPanel().querySelector(".e-headercontent"))),this.virtualEle.table=this.getTable(),this.virtualEle.content=this.getPanel().querySelector(".e-headercontent"),this.virtualEle.content.style.position="relative",this.virtualEle.renderWrapper(),this.virtualEle.renderPlaceHolder()},e}(),L=function(){function e(){}return e.prototype.renderWrapper=function(e){this.wrapper=this.content.querySelector(".e-virtualtable"),this.wrapper.setAttribute("styles","min-height:"+sf.base.formatUnit(e))},e.prototype.renderPlaceHolder=function(){this.placeholder=this.content.querySelector(".e-virtualtrack")},e.prototype.adjustTable=function(e,t){this.wrapper.style.transform="translate("+e+"px, "+t+"px)"},e.prototype.setWrapperWidth=function(e,t){this.wrapper.style.width=e?e+"px":t?"100%":""},e.prototype.setVirtualHeight=function(e,t){this.placeholder.style.height=e+"px",this.placeholder.style.width=t},e}(),P=function(){function e(e){this.cOffsets={},this.data={},this.groups={},this.parent=e}return e.prototype.getBlockIndexes=function(e){return[e+(e-1),2*e]},e.prototype.getPage=function(e){return e%2==0?e/2:(e+1)/2},e.prototype.getData=function(){return{page:this.parent.options.currentPage,blockIndexes:this.getBlockIndexes(this.parent.options.currentPage),direction:"down",columnIndexes:this.parent.getColumnIndexesInView()}},e.prototype.getColumnIndexes=function(e){var t=this;void 0===e&&(e=this.parent.getHeaderContent());var n=[],o=0|e.scrollLeft,r=Object.keys(this.cOffsets),i=this.parent.options.needClientAction?e.getBoundingClientRect().width:Number(this.parent.options.width);o=Math.min(this.cOffsets[r.length-1]-i,o);var s=sf.base.Browser.isDevice?2*i:i/2,l=o+i+(0===o?s:0);return r.some((function(e,r,i){var a=Number(e),d=t.cOffsets[e];return o-s<=d&&l+s>=d&&n.push(a),l+s<d})),this.parent.virtualContentModule.startColIndex=n[0],this.parent.virtualContentModule.endColIndex=n[n.length-1],n},e.prototype.refreshColOffsets=function(){var e=0;this.cOffsets={};for(var t=this.parent.options.groupCount,n=this.parent.options.columns,o=n.length,r=Array.apply(null,Array(o)).map((function(){return e++})),i=0;i<r.length;i++)r[i]=r[i]+t,this.cOffsets[r[i]]=(0|this.cOffsets[r[i]-1])+(n[i].visible?parseInt(n[i].width,10):0)},e}(),O=function(){function t(e,t,n){this.columnModel=[],this.inViewIndexes=[],this.isRendered=!1,this.element=e,this.element.blazor__instance=this,this.dotNetRef=n,this.options=t,this.header=this.element.querySelector(".e-headercontent"),this.content=this.element.querySelector(".e-content"),this.footer=this.element.querySelector(".e-summarycontent"),this.initModules()}return t.prototype.initModules=function(){this.scrollModule=new u(this),this.freezeModule=new f(this),this.headerDragDrop=new g(this),this.contentDragDrop=new m(this),this.reorderModule=new y(this),this.groupModule=new R(this),this.resizeModule=new E(this),this.editModule=new A(this),this.columnChooserModule=new q(this),this.clipboardModule=new z(this),this.columnMenuModule=new T(this),this.filterModule=new I(this),this.virtualContentModule=new W(this),this.virtualHeaderModule=new N(this),this.toolTipModule=new M(this),this.rowDragAndDropModule=new B(this),this.selectionModule=new D(this),this.isRendered=this.options.isPrerendered,this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:F,eventName:"keydown"}),this.options.enableColumnVirtualization&&this.virtualHeaderModule.renderTable(),this.options.enableVirtualization&&this.virtualContentModule.renderTable(),this.options.allowResizing&&this.resizeModule.render(),this.options.needClientAction?this.clientActions():this.contentReady(),this.wireEvents()},t.prototype.getHeaderContent=function(){return this.header},t.prototype.getHeaderTable=function(){return this.header.querySelector(".e-table")},t.prototype.getContent=function(){return this.content},t.prototype.getContentTable=function(){return this.content.querySelector(".e-table")},t.prototype.getFooterContent=function(){return this.footer},t.prototype.getColumns=function(e){return this.columnModel=[],this.updateColumnModel(this.options.columns),this.columnModel},t.prototype.updateColumnModel=function(e){for(var t=0,n=e.length;t<n;t++)e[t].columns?this.updateColumnModel(e[t].columns):this.columnModel.push(e[t])},t.prototype.getColumnByIndex=function(e){var t;return this.getColumns().some((function(n,o){return t=n,o===e})),t},t.prototype.getDataRows=function(){if(sf.base.isNullOrUndefined(this.getContentTable().querySelector("tbody")))return[];var e=[].slice.call(this.getContentTable().querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderTable().querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},t.prototype.addMovableRows=function(e,t){for(var n=0,o=t.length;n<o;n++)e.push(t[n]);return e},t.prototype.generateDataRows=function(e){for(var t=[],n=0,o=e.length;n<o;n++)e[n].classList.contains("e-row")&&!e[n].classList.contains("e-hiddenrow")&&t.push(e[n]);return t},t.prototype.getMovableDataRows=function(){var e=[].slice.call(this.getContent().querySelector(".e-movablecontent").querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},t.prototype.getFrozenDataRows=function(){var e=[].slice.call(this.getContent().querySelector(".e-frozencontent").querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},t.prototype.getRowByIndex=function(e){return this.getDataRows()[e]},t.prototype.getCellFromIndex=function(e,t){var n=this.options.frozenColumns;return n&&t>=n?this.getMovableDataRows()[e]&&this.getMovableDataRows()[e].querySelectorAll(".e-rowcell")[t-n]:this.getDataRows()[e]&&this.getDataRows()[e].querySelectorAll(".e-rowcell")[t]},t.prototype.getColumnHeaderByIndex=function(e){return this.getHeaderTable().querySelectorAll(".e-headercell")[e]},t.prototype.getRows=function(){return this.options.frozenColumns?this.getFrozenDataRows():[].slice.call(this.getContentTable().querySelectorAll("tr.e-row[data-uid]"))},t.prototype.getSelectedRows=function(){return this.getRows().filter((function(e){return"true"===e.getAttribute("aria-selected")}))},t.prototype.getSelectedRowIndexes=function(){for(var e=[],t=this.getRows(),n=0;n<t.length;n++)t[n].hasAttribute("aria-selected")&&"true"===t[n].getAttribute("aria-selected")&&e.push(n);return e},t.prototype.getVisibleColumns=function(){for(var e=[],t=0,n=this.columnModel;t<n.length;t++){var o=n[t];o.visible&&e.push(o)}return e},t.prototype.getColumnByField=function(e){return a(this.getColumns(),(function(t,n){if(t.field===e)return t}))[0]},t.prototype.getColumnIndexByField=function(e){for(var t=this.getColumns(),n=0;n<t.length;n++)if(t[n].field===e)return n;return-1},t.prototype.getColumnByUid=function(e){return a(this.getColumns().concat(this.getStackedColumns(this.options.columns)),(function(t,n){if(t.uid===e)return t}))[0]},t.prototype.getStackedColumns=function(e,t){void 0===t&&(t=[]);for(var n=0,o=e;n<o.length;n++){var r=o[n];r.columns&&(t.push(r),this.getStackedColumns(r.columns,t))}return t},t.prototype.getColumnIndexByUid=function(e){var t=a(this.getColumns(),(function(t,n){if(t.uid===e)return n}))[0];return sf.base.isNullOrUndefined(t)?-1:t},t.prototype.getColumnHeaderByUid=function(e){return this.getHeaderContent().querySelector("[e-mappinguid="+e+"]").parentElement},t.prototype.getUidByColumnField=function(e){return a(this.getColumns(),(function(t,n){if(t.field===e)return t.uid}))[0]},t.prototype.getStackedHeaderColumnByHeaderText=function(e,t){for(var n=0;n<t.length;n++){var o=t[n];if(o.field===e||o.headerText===e){this.stackedColumn=o;break}o.columns&&this.getStackedHeaderColumnByHeaderText(e,o.columns)}return this.stackedColumn},t.prototype.getNormalizedColumnIndex=function(e){return this.getColumnIndexByUid(e)+this.getIndentCount()},t.prototype.getIndentCount=function(){var e=0;return this.options.allowGrouping&&(e+=this.options.groupCount),this.options.hasDetailTemplate&&e++,this.options.allowRowDragAndDrop&&this.options.hasDropTarget&&e++,e},t.prototype.recalcIndentWidth=function(){if(this.isRendered&&this.getHeaderTable().querySelector(".e-emptycell")&&(this.options.groupCount||this.options.hasDetailTemplate||!this.options.allowRowDragAndDrop||!this.options.hasDropTarget)&&this.getContentTable()&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")){var e=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,t=e/30;t>=1&&(e=30/t),this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true"),this.dotNetRef.invokeMethodAsync("SetIndentWidth",e+"px")}},t.prototype.contentReady=function(e){void 0===e&&(e=null),this.getColumns().some((function(e){return e.autoFit}))&&this.resizeModule.autoFit(),this.options.frozenColumns&&this.freezeModule.refreshRowHeight(),this.options.enableVirtualization&&this.virtualContentModule.onDataReady(),this.recalcIndentWidth(),"Paging"===e&&(r(document.activeElement,"e-grid")||this.element.focus())},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"focus",this.gridFocus,this),sf.base.EventHandler.add(document,"click",this.documentClickHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.gridKeyDownHandler,this)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"focus",this.gridFocus),sf.base.EventHandler.remove(document,"click",this.documentClickHandler),sf.base.EventHandler.remove(this.element,"keydown",this.gridKeyDownHandler)},t.prototype.setOptions=function(e,t){var n=sf.base.extend(t,{});if(this.options=e,!n.allowResizing&&e.allowResizing&&this.resizeModule.render(),(!n.allowGrouping&&e.allowGrouping||!n.allowReordering&&e.allowReordering)&&(this.headerDragDrop.initializeHeaderDrag(),this.headerDragDrop.initializeHeaderDrop(),this.groupModule.initializeGHeaderDrag(),this.groupModule.initializeGHeaderDrop()),!n.allowGrouping&&e.allowGrouping&&this.contentDragDrop.initializeContentDrop(),!n.allowRowDragAndDrop&&e.allowRowDragAndDrop?this.rowDragAndDropModule.initializeDrag():n.allowRowDragAndDrop&&!e.allowRowDragAndDrop&&this.rowDragAndDropModule.destroy(),this.isRendered||(this.isRendered=this.options.isPrerendered),n.groupCount!=e.groupCount){var o=this.getHeaderTable().querySelector(".e-emptycell");if(!o)return;o.removeAttribute("indentRefreshed")}},t.prototype.documentClickHandler=function(e){var t=r(e.target,"e-popup-open"),n=r(e.target,"e-cc-toolbar");t||e.target.classList.contains("e-icon-filter")||n||!this.element.querySelectorAll(".e-filter-popup.e-popup-open").length&&!this.element.querySelectorAll(".e-ccdlg.e-popup-open").length||this.dotNetRef.invokeMethodAsync("FilterPopupClose")},t.prototype.gridKeyDownHandler=function(e){var t;r(e.target,"e-popup-open")&&"Escape"!=e.key&&(e.stopPropagation(),"Tab"!=e.key&&"shiftTab"!=e.key&&"Enter"!=e.key&&"shiftEnter"!=e.key||"INPUT"!=e.target.tagName||((t=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.target.dispatchEvent(t)));(67===e.keyCode&&e.ctrlKey?this.clipboardModule.copy():72===e.keyCode&&e.ctrlKey&&e.shiftKey&&this.clipboardModule.copy(!0),86===e.keyCode&&e.ctrlKey&&!this.options.isEdit&&this.clipboardModule.pasteHandler(),this.element.querySelector(".e-batchrow"))&&("Tab"!=e.key&&"shiftTab"!=e.key&&"Enter"!=e.key&&"shiftEnter"!=e.key&&"Escape"!=e.key&&e.stopPropagation(),("Tab"==e.key||"shiftTab"==e.key||"Enter"==e.key||"shiftEnter"==e.key)&&(e.preventDefault(),"INPUT"==e.target.tagName&&((t=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.target.dispatchEvent(t))))},t.prototype.mouseDownHandler=function(e){var t=r(e.target,"e-grid");if(!t||t.id===this.element.id)if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),2!==e.button&&r(e.target,"e-headercell")||sf.base.closest(e.target,".e-groupdroparea")||sf.base.closest(e.target,".e-gridpopup")||sf.base.closest(e.target,".e-summarycell")||sf.base.closest(e.target,".e-rhandler")||sf.base.closest(e.target,".e-filtermenudiv")||sf.base.closest(e.target,".e-filterbarcell")||sf.base.closest(e.target,".e-groupcaption"))this.dotNetRef.invokeMethodAsync("MouseDownHandler",null,null);else{var n=null,o=null;r(e.target,"e-editcell")||r(e.target,"e-gridform")?n="Edit":r(e.target,"e-pager")?n="Pager":r(e.target,"e-headercontent")?(n="Header",o=r(e.target,"e-headercell")?r(e.target,"e-headercell").getAttribute("data-uid"):null):r(e.target,"e-content")&&(n="Content",o=r(e.target,"e-rowcell")?r(e.target,"e-rowcell").getAttribute("data-uid"):null),"Header"!=n&&"Content"!=n&&"Pager"!=n&&"Edit"!=n||this.dotNetRef.invokeMethodAsync("MouseDownHandler",n,o)}},t.prototype.gridFocus=function(e){this.element.classList.contains("e-editing")||this.dotNetRef.invokeMethodAsync("GridFocus",e)},t.prototype.keyActionHandler=function(e){var t=this;"pageUp"!==e.action&&"pageDown"!==e.action&&"ctrlAltPageUp"!==e.action&&"ctrlAltPageDown"!==e.action&&"altPageUp"!==e.action&&"altPageDown"!==e.action&&"altDownArrow"!==e.action&&"ctrlPlusP"!==e.action||e.preventDefault(),"enter"===e.action&&this.element.classList.contains("e-editing")&&"Batch"!==this.options.editMode&&setTimeout((function(){return t.dotNetRef.invokeMethodAsync("EndEdit")}),40)},t.prototype.destroy=function(){this.unWireEvents(),this.toolTipModule.destroy(),this.keyModule.destroy(),this.virtualContentModule.removeEventListener(),this.columnChooserModule.removeMediaListener(),this.selectionModule.removeEventListener(),this.rowDragAndDropModule.destroy()},t.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},t.prototype.setColumnIndexesInView=function(e){this.inViewIndexes=e},t.prototype.getRowHeight=function(){return this.options.rowHeight?this.options.rowHeight:function(t){if(void 0!==e)return e;var n=sf.base.createElement("table",{className:"e-table",styles:"visibility: hidden"});n.innerHTML='<tr><td class="e-rowcell">A<td></tr>',t.appendChild(n);var o=n.querySelector("td").getBoundingClientRect();return t.removeChild(n),e=Math.ceil(o.height)}(this.element)},t.prototype.clientActions=function(){!this.options.enableVirtualization||12!==this.options.pageSize&&"auto"!==this.options.width||this.virtualContentModule.ensurePageSize(),this.options.columns.some((function(e){return""!==e.hideAtMedia}))&&this.columnChooserModule.setMediaColumns()},t.prototype.print=function(){this.removeColGroup();var e=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no");e.moveTo(0,0),e.resizeTo(screen.availWidth,screen.availHeight),sf.base.print(this.element,e)},t.prototype.removeColGroup=function(){var e=this.options.groupCount,t=this.element,n="#"+this.element.id;if(e){for(var o=t.querySelectorAll(".e-groupcaption"),r=o[e-1].getAttribute("colspan"),i=0;i<o.length;i++)o[i].setAttribute("colspan",r);var s=t.querySelectorAll("colgroup"+n+"colGroup"),l=t.querySelector(".e-content").querySelectorAll("colgroup");this.hideColGroup(s,e),this.hideColGroup(l,e)}},t.prototype.hideColGroup=function(e,t){for(var n=0;n<e.length;n++)for(var o=0;o<t;o++)e[n].children[o].style.display="none"},t.prototype.getModuleName=function(){return"grid"},t}(),F={pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",enter:"enter"};return{initialize:function(e,t,n){sf.base.enableBlazorMode(),new O(e,t,n)},contentReady:function(e,t,n){var o=e.blazor__instance;o.setOptions(t,o.options),o.options=t,o.contentReady(n)},reorderColumns:function(e,t,n){e.blazor__instance.reorderModule.reorderColumns(t,n)},reorderColumnByIndex:function(e,t,n){e.blazor__instance.reorderModule.reorderColumnByIndex(t,n)},reorderColumnByTargetIndex:function(e,t,n){e.blazor__instance.reorderModule.reorderColumnByTargetIndex(t,n)},renderColumnChooser:function(e){e.blazor__instance.columnChooserModule.renderColumnChooser()},renderColumnMenu:function(e,t,n,o){return e.blazor__instance.columnMenuModule.renderColumnMenu(t,n,o)},filterPopupRender:function(e,t,n,o,r){e.blazor__instance.filterModule.filterPopupRender(t,n,o,r)},autoFitColumns:function(e,t){e.blazor__instance.resizeModule.autoFitColumns(t)},refreshColumnIndex:function(e,t){var n=e.blazor__instance;n.options.columns=t,n.virtualContentModule.refreshColumnIndexes()},focus:function(e,t,n,o){var r=e.querySelector('[data-uid="'+n+'"]'),i=e.blazor__instance;i.options.enableVirtualization?i.virtualContentModule.focusCell(r,o):r.focus()},refreshOnDataChange:function(e){e.blazor__instance.virtualContentModule.refreshOnDataChange()},focusChild:function(e,t,n){var o=[].slice.call(e.querySelector('[data-uid="'+n+'"]').querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])'));return o.length>0?o[0].focus():e.querySelector('[data-uid="'+n+'"]').focus(),!!o.length},exportSave:function(e,t){if(navigator.msSaveBlob){for(var n=window.atob(t),o=new Uint8Array(n.length),r=0;r<n.length;r++)o[r]=n.charCodeAt(r);var i=new Blob([o.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(i,e)}else{var s=document.createElement("a");s.download=e,s.href="data:application/octet-stream;base64,"+t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}},destroy:function(e){e.blazor__instance.destroy()},validation:function(e,t,n){e.blazor__instance.editModule.createTooltip(t,n)},focusCell:function(e,t,n){n&&e.blazor__instance.options.frozenColumns&&(e.querySelector(".e-frozencontent").style.height=e.querySelector(".e-movablecontent").getBoundingClientRect().height+"px"),""==t&&e.querySelector("input.e-boolcell")?e.querySelector("input.e-boolcell").focus():e.querySelector("#"+t)&&e.querySelector("#"+t).focus()},setFrozenHeight:function(e){e.querySelector(".e-frozencontent").style.height=e.querySelector(".e-movablecontent").offsetHeight-n()+"px"},printGrid:function(e){e.blazor__instance.print()},updateMediaColumns:function(e,t){e.blazor__instance.columnChooserModule.updateMediaColumns(t)},copyToClipBoard:function(e,t){e.blazor__instance.clipboardModule.copy(t)}}}()}}]);