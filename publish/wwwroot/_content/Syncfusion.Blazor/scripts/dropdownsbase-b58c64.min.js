(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"./bundles/dropdownsbase.js":function(e,t,s){"use strict";s.r(t);var i=s("../node_modules/@babel/runtime/helpers/typeof.js"),r=s.n(i);window.sf=window.sf||{};var a,l,o,n,p,d,u,h,f,c,m;sfBlazor.modules.dropdownsbase="dropdowns.DropDownBase",window.sf.dropdowns=window.sf.base.extend({},window.sf.dropdowns,(a={},l="",o="",n=[],p="",d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},u=function(e,t){function s(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)},h=function(e,t,s,i){var a,l=arguments.length,o=l<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"===("undefined"==typeof Reflect?"undefined":r()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(o=(l<3?a(o):l>3?a(t,s,o):a(t,s))||o);return l>3&&o&&Object.defineProperty(t,s,o),o},f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),h([sf.base.Property()],t.prototype,"text",void 0),h([sf.base.Property()],t.prototype,"value",void 0),h([sf.base.Property()],t.prototype,"iconCss",void 0),h([sf.base.Property()],t.prototype,"groupBy",void 0),h([sf.base.Property()],t.prototype,"htmlAttributes",void 0),t}(sf.base.ChildProperty),c={root:"e-dropdownbase",rtl:"e-rtl",content:"e-content",selected:"e-active",hover:"e-hover",noData:"e-nodata",fixedHead:"e-fixed-head",focus:"e-item-focus",li:"e-list-item",group:"e-list-group-item",disabled:"e-disabled",grouping:"e-dd-group"},m=function(e){function t(t,s){return e.call(this,t,s)||this}return u(t,e),t.prototype.getPropObject=function(e,t,s){var i=new Object,r=new Object;i[e]=t[e],r[e]=s[e];var a=new Object;return a.newProperty=i,a.oldProperty=r,a},t.prototype.getValueByText=function(e,t,s){var i=null;return sf.base.isNullOrUndefined(this.listData)||(i=t?this.checkValueCase(e,!0,s):this.checkValueCase(e,!1,s)),i},t.prototype.checkValueCase=function(e,t,s,i){var r=this,a=null;i&&(a=e);var l=this.listData,o=this.fields,n=this.typeOfData(l).typeof;if("string"===n||"number"===n||"boolean"===n)for(var p=0,d=l;p<d.length;p++){var u=d[p];sf.base.isNullOrUndefined(u)||(s?a=this.checkingAccent(String(u),e,t):t?this.checkIgnoreCase(String(u),e)&&(a=this.getItemValue(String(u),e,t)):this.checkNonIgnoreCase(String(u),e)&&(a=this.getItemValue(String(u),e,t,i)))}else t?l.filter((function(t){var s=sf.base.getValue(o.value,t);!sf.base.isNullOrUndefined(s)&&r.checkIgnoreCase(sf.base.getValue(o.text,t).toString(),e)&&(a=sf.base.getValue(o.value,t))})):i?l.filter((function(e){var t=sf.base.getValue(o.value,e);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(a)||t.toString()!==a.toString()||(a=sf.base.getValue(o.text,e))})):l.filter((function(t){r.checkNonIgnoreCase(sf.base.getValue(o.text,t),e)&&(a=sf.base.getValue(o.value,t))}));return a},t.prototype.checkingAccent=function(e,t,s){var i=sf.data.DataUtil.ignoreDiacritics(String(e)),r=sf.data.DataUtil.ignoreDiacritics(t.toString()),a=null;return s?this.checkIgnoreCase(i,r)&&(a=this.getItemValue(String(e),t,s)):this.checkNonIgnoreCase(String(e),t)&&(a=this.getItemValue(String(e),t,s)),a},t.prototype.checkIgnoreCase=function(e,t){return String(e).toLowerCase()===t.toString().toLowerCase()},t.prototype.checkNonIgnoreCase=function(e,t){return String(e)===t.toString()},t.prototype.getItemValue=function(e,t,s,i){var r=this.listData,a=this.typeOfData(r).typeof;return i?e.toString():s?"string"===a?String(e):this.getFormattedValue(String(e)):"string"===a?t:this.getFormattedValue(t)},t.prototype.templateCompiler=function(e){var t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(e){t=!1}return t},t.prototype.l10nUpdate=function(e){var t="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){this.DropDownBaseresetBlazorTemplates(!1,!1,!0,!0);var s=e?this.actionFailureTemplate:this.noRecordsTemplate,i=e?this.actionFailureTemplateId:this.noRecordsTemplateId;t.innerHTML="";for(var r=0,a=(this.templateCompiler(s)?sf.base.compile(document.querySelector(s).innerHTML.trim()):sf.base.compile(s))({},null,null,i,this.isStringTemplate);r<a.length;r++){var l=a[r];t.appendChild(l)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!e,e,!1,!1,!1,!1)}else{var o=new sf.base.L10n(this.getLocaleName(),{},this.locale);""!==o.getConstant("actionFailureTemplate")?this.l10n=o:this.l10n=new sf.base.L10n("listbox"===this.getModuleName()?"listbox":"dropdowns",{noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},this.locale);var n=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate");if("listbox"===this.getModuleName()){var p=this.createElement("li");p.textContent=n,t.appendChild(p),p.classList.add("e-list-nrt")}else t.innerHTML=n}},t.prototype.getLocaleName=function(){return"drop-down-base"},t.prototype.getTextByValue=function(e){return this.checkValueCase(e,!1,!1,!0)},t.prototype.getFormattedValue=function(e){if(this.listData&&this.listData.length){var t=this.typeOfData(this.listData);if(sf.base.isBlazor()&&sf.base.isNullOrUndefined(e)||"null"===e)return null;if("number"==typeof sf.base.getValue(this.fields.value?this.fields.value:"value",t.item)||"number"===t.typeof)return parseFloat(e);if("boolean"==typeof sf.base.getValue(this.fields.value?this.fields.value:"value",t.item)||"boolean"===t.typeof)return"true"===e}return e},t.prototype.setEnableRtl=function(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?sf.base.addClass(this.enableRtlElements,c.rtl):sf.base.removeClass(this.enableRtlElements,c.rtl)},t.prototype.initialize=function(){if(this.bindEvent=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){var e=sf.lists.ListBase.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(e,this.fields)}else"SELECT"===this.element.tagName?(this.dataSource instanceof Array?this.dataSource.length>0:!sf.base.isNullOrUndefined(this.dataSource))||this.renderItemsBySelect():this.setListData(this.dataSource,this.fields,this.query)},t.prototype.DropDownBaseupdateBlazorTemplates=function(e,t,s,i,r,a,l,o){this.isStringTemplate||(this.itemTemplate&&e&&sf.base.updateBlazorTemplate(this.itemTemplateId,"ItemTemplate",this,o),this.groupTemplate&&t&&sf.base.updateBlazorTemplate(this.groupTemplateId,"GroupTemplate",this,o),this.noRecordsTemplate&&s&&sf.base.updateBlazorTemplate(this.noRecordsTemplateId,"NoRecordsTemplate",this,o),this.actionFailureTemplate&&i&&sf.base.updateBlazorTemplate(this.actionFailureTemplateId,"ActionFailureTemplate",this,o),r&&sf.base.updateBlazorTemplate(this.valueTemplateId,"ValueTemplate",this,o),a&&sf.base.updateBlazorTemplate(this.headerTemplateId,"HeaderTemplate",this),l&&sf.base.updateBlazorTemplate(this.footerTemplateId,"FooterTemplate",this))},t.prototype.DropDownBaseresetBlazorTemplates=function(e,t,s,i,r,a,l){this.isStringTemplate||(this.itemTemplate&&e&&sf.base.resetBlazorTemplate(this.itemTemplateId,"ItemTemplate"),this.groupTemplate&&t&&sf.base.resetBlazorTemplate(this.groupTemplateId,"GroupTemplate"),this.noRecordsTemplate&&s&&sf.base.resetBlazorTemplate(this.noRecordsTemplateId,"NoRecordsTemplate"),this.actionFailureTemplate&&i&&sf.base.resetBlazorTemplate(this.actionFailureTemplateId,"ActionFailureTemplate"),r&&sf.base.resetBlazorTemplate(this.valueTemplateId,"ValueTemplate"),a&&sf.base.resetBlazorTemplate(this.headerTemplateId,"HeaderTemplate"),l&&sf.base.resetBlazorTemplate(this.footerTemplateId,"FooterTemplate"))},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},t.prototype.updateDataAttribute=function(e){for(var t=["class","style","id","type"],s={},i=0;i<this.element.attributes.length;i++)-1!==t.indexOf(this.element.attributes[i].name)||"dropdownlist"===this.getModuleName()&&"readonly"===this.element.attributes[i].name||(s[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name));sf.base.extend(s,e,s),this.setProperties({htmlAttributes:s},!0)},t.prototype.renderItemsBySelect=function(){var e=this.element,t={value:"value",text:"text"},s=[],i=e.querySelectorAll("select>optgroup"),r=e.querySelectorAll("select>option");if(this.getJSONfromOption(s,r,t),i.length){for(var a=0;a<i.length;a++){var l=i[a],o={};o[t.text]=l.label,o.isHeader=!0;var n=l.querySelectorAll("option");s.push(o),this.getJSONfromOption(s,n,t)}e.querySelectorAll("select>option")}this.fields.text=t.text,this.fields.value=t.value,this.resetList(s,t)},t.prototype.getJSONfromOption=function(e,t,s){for(var i=0,r=t;i<r.length;i++){var a=r[i],l={};l[s.text]=a.innerText,l[s.value]=a.getAttribute(s.value)?a.getAttribute(s.value):a.innerText,e.push(l)}},t.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"},t.prototype.setListData=function(e,t,s){var i,r=this;t=t||this.fields,this.isActive=!0;var a={cancel:!1,data:e,query:s};this.trigger("actionBegin",a,(function(s){if(!s.cancel)if(r.showSpinner(),e instanceof sf.data.DataManager){if(r.isRequested=!0,r.isDataFetched)return void r.emptyDataRequest(t);s.data.executeQuery(r.getQuery(s.query)).then((function(e){r.trigger("actionComplete",e,(function(e){if(!e.cancel){var s=e.result;0===s.length&&(r.isDataFetched=!0),i=r.renderItems(s,t),r.onActionComplete(i,s,e),r.groupTemplate&&r.renderGroupTemplate(i),r.isRequested=!1,r.bindChildItems(s,i,t,e)}}))})).catch((function(e){r.isRequested=!1,r.onActionFailure(e),r.hideSpinner()}))}else{var a=new sf.data.DataManager(s.data),l={cancel:!1,result:r.getQuery(s.query).executeLocal(a)};r.trigger("actionComplete",l,(function(e){e.cancel||(i=r.renderItems(e.result,t),r.onActionComplete(i,e.result),r.groupTemplate&&r.renderGroupTemplate(i),r.bindChildItems(e.result,i,t))}))}}))},t.prototype.bindChildItems=function(e,t,s,i){var r=this;e.length>=100&&"autocomplete"===this.getModuleName()?setTimeout((function(){var a=r.remainingItems(r.sortedData,s);sf.base.append(a,t),r.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1),r.liCollections=r.list.querySelectorAll("."+c.li),r.updateListValues(),r.raiseDataBound(e,i)}),0):this.raiseDataBound(e,i)},t.prototype.updateListValues=function(){},t.prototype.findListElement=function(e,t,s,i){var r=null;if(e)for(var a=[].slice.call(e.querySelectorAll(t)),l=0;l<a.length;l++)if(a[l].getAttribute(s)===i+""){r=a[l];break}return r},t.prototype.raiseDataBound=function(e,t){this.hideSpinner();var s={items:e,e:t};this.trigger("dataBound",s)},t.prototype.remainingItems=function(e,t){var s=new sf.data.DataManager(e).executeLocal((new sf.data.Query).skip(100));if(this.itemTemplate){var i=this.templateListItem(s,t);return[].slice.call(i.childNodes)}var r=this.typeOfData(s).typeof;return"string"===r||"number"===r||"boolean"===r?sf.lists.ListBase.createListItemFromArray(this.createElement,s,!0,this.listOption(s,t)):sf.lists.ListBase.createListItemFromJson(this.createElement,s,this.listOption(s,t),1,!0)},t.prototype.emptyDataRequest=function(e){var t=[];this.onActionComplete(this.renderItems(t,e),t),this.isRequested=!1,this.hideSpinner()},t.prototype.showSpinner=function(){},t.prototype.hideSpinner=function(){},t.prototype.onActionFailure=function(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),sf.base.addClass([this.list],c.noData)},t.prototype.onActionComplete=function(e,t,s){this.listData=t,sf.base.isBlazor()&&this.isServerRendered&&"listbox"===this.getModuleName()?(sf.base.remove(this.list.querySelector(".e-list-parent")),sf.base.remove(this.list.querySelector(".e-hidden-select"))):this.list.innerHTML="",this.fixedHeaderElement=sf.base.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement:null,this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+c.li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent)},t.prototype.postRender=function(e,t,s){var i=e.querySelector("."+c.li),r=e.querySelector("."+c.selected);i&&!r&&i.classList.add(c.focus),t.length<=0?(this.l10nUpdate(),sf.base.addClass([e],c.noData)):e.classList.remove(c.noData)},t.prototype.getQuery=function(e){return e||(this.query?this.query:new sf.data.Query)},t.prototype.renderGroupTemplate=function(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+c.group)){var t=this.dataSource,s={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},i=e.querySelectorAll("."+c.group);if(this.templateCompiler(this.groupTemplate)){var r=document.querySelector(this.groupTemplate).innerHTML.trim();sf.lists.ListBase.renderGroupTemplate(r,t,this.fields.properties,i,s)}else sf.lists.ListBase.renderGroupTemplate(this.groupTemplate,t,this.fields.properties,i,s);this.DropDownBaseupdateBlazorTemplates(!1,!0,!1,!1,!1,!1,!1,!1)}},t.prototype.createListItems=function(e,t){e&&t.groupBy||this.element.querySelector("optgroup")?(t.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=sf.lists.ListBase.groupDataSource(e,t.properties,this.sortOrder)),sf.base.addClass([this.list],c.grouping)):e=this.getSortedDataSource(e);var s=this.listOption(e,t),i=e.length>100?new sf.data.DataManager(e).executeLocal((new sf.data.Query).take(100)):e;return this.sortedData=e,sf.lists.ListBase.createList(this.createElement,"autocomplete"===this.getModuleName()?i:e,s,!0)},t.prototype.listOption=function(e,t){var s=!sf.base.isNullOrUndefined(t.iconCss),i=sf.base.isNullOrUndefined(t.properties)?t:t.properties,r=null!==t.text||null!==t.value?{fields:i,showIcon:s,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}};return sf.base.extend({},r,t,!0)},t.prototype.setFloatingHeader=function(e){sf.base.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:c.fixedHead}),this.list.querySelector("li").classList.contains(c.group)||(this.fixedHeaderElement.style.display="none"),sf.base.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader()),sf.base.isNullOrUndefined(this.fixedHeaderElement)||"0"!==this.fixedHeaderElement.style.zIndex||this.setFixedHeader(),this.scrollStop(e)},t.prototype.scrollStop=function(e){for(var t=e.target,s=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10),i=Math.round(t.scrollTop/s),r=this.list.querySelectorAll("li"),a=i;a>-1;a--){if(!sf.base.isNullOrUndefined(r[a])&&r[a].classList.contains(c.group)){var l=r[a];this.fixedHeaderElement.innerHTML=l.innerHTML,this.fixedHeaderElement.style.top=e.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},t.prototype.renderItems=function(e,t){var s;if(this.itemTemplate&&e){var i=e;i&&t.groupBy?("None"!==this.sortOrder&&(i=this.getSortedDataSource(i)),i=sf.lists.ListBase.groupDataSource(i,t.properties,this.sortOrder)):i=this.getSortedDataSource(i),this.sortedData=i;var r=i.length>100?new sf.data.DataManager(i).executeLocal((new sf.data.Query).take(100)):i;s=this.templateListItem("autocomplete"===this.getModuleName()?r:i,t);var a="listbox"===this.getModuleName();this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1,!1,!1,!1,a)}else s=this.createListItems(e,t);return s},t.prototype.templateListItem=function(e,t){this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);var s=this.listOption(e,t);if(s.templateID=this.itemTemplateId,s.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){var i=document.querySelector(this.itemTemplate).innerHTML.trim();return sf.lists.ListBase.renderContentTemplate(this.createElement,i,e,t.properties,s)}return sf.lists.ListBase.renderContentTemplate(this.createElement,this.itemTemplate,e,t.properties,s)},t.prototype.typeOfData=function(e){for(var t={typeof:null,item:null},s=0;!sf.base.isNullOrUndefined(e)&&s<e.length;s++)if(!sf.base.isNullOrUndefined(e[s])&&!("string"==typeof e[s]||"number"==typeof e[s]||"boolean"==typeof e[s]?sf.base.isNullOrUndefined(e[s]):sf.base.isNullOrUndefined(sf.base.getValue(this.fields.value?this.fields.value:"value",e[s]))))return{typeof:r()(e[s]),item:e[s]};return t},t.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10));var t=this.liCollections[0].offsetWidth-e;this.fixedHeaderElement.style.width=t.toString()+"px",sf.base.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});var s=this.ulElement.querySelector("."+c.group);this.fixedHeaderElement.innerHTML=s.innerHTML},t.prototype.getSortedDataSource=function(e){if(e&&"None"!==this.sortOrder){var t=this.fields.text?this.fields.text:"text";e=sf.lists.ListBase.getDataSource(e,sf.lists.ListBase.addSorting(this.sortOrder,t))}return e},t.prototype.getIndexByValue=function(e){for(var t,s=this.getItems(),i=0;i<s.length;i++)if(!sf.base.isNullOrUndefined(e)&&s[i].getAttribute("data-value")===e.toString()){t=i;break}return t},t.prototype.dispatchEvent=function(e,t){var s=document.createEvent("HTMLEvents");s.initEvent(t,!1,!0),e.dispatchEvent(s)},t.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.fields.text=this.fields.value:!this.fields.value&&this.fields.text?this.fields.value=this.fields.text:this.fields.value||this.fields.text||(this.fields.value=this.fields.text="text")},t.prototype.resetList=function(e,t,s){this.list&&(("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)&&!(e instanceof Array?e.length>0:!sf.base.isNullOrUndefined(e))&&this.selectData&&this.selectData.length>0&&(e=this.selectData),this.setListData(e,t,s))},t.prototype.updateSelectElementData=function(e){e&&sf.base.isNullOrUndefined(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},t.prototype.updateSelection=function(){},t.prototype.renderList=function(){this.render()},t.prototype.updateDataSource=function(e){this.resetList(this.dataSource)},t.prototype.setUpdateInitial=function(e,t){this.isDataFetched=!1;for(var s={},i=0;e.length>i;i++)t[e[i]]&&"fields"===e[i]?this.setFields():t[e[i]]&&(s[e[i]]=t[e[i]]);Object.keys(s).length>0&&(-1===Object.keys(s).indexOf("dataSource")&&(s.dataSource=this.dataSource),this.updateDataSource(s))},t.prototype.onPropertyChanged=function(e,t){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(var s=0,i=Object.keys(e);s<i.length;s++)switch(i[s]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var r=this.ulElement.querySelector("."+c.group);this.fixedHeaderElement.innerHTML=r.innerHTML}break;case"locale":this.list&&!sf.base.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}},t.prototype.render=function(e){this.list=this.createElement("div",{className:c.content,attrs:{tabindex:"0"}}),this.list.classList.add(c.root),this.setFields();var t={duration:300,selector:"."+c.li};this.rippleFun=sf.base.rippleEffect(this.list,t);var s=this.element.querySelector("select>optgroup");if(!this.fields.groupBy&&sf.base.isNullOrUndefined(s)||this.isGroupChecking||sf.base.EventHandler.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),sf.base.removeClass([this.element],c.root),this.element.style.display="none";var i=this.createElement("div");this.element.parentElement.insertBefore(i,this.element),i.appendChild(this.element),i.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),e||this.initialize()},t.prototype.getModuleName=function(){return"dropdownbase"},t.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+c.li)},t.prototype.addItem=function(e,t){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&sf.base.isNullOrUndefined(t)){var s=[].slice.call(this.listData);s.push(e),t=(s=this.getSortedDataSource(s)).indexOf(e)}this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);var i,r=this.getItems().length,a=this.list.querySelector("."+c.selected);e=e instanceof Array?e:[e],i=sf.base.isNullOrUndefined(t)||t<0||t>r-1?r:t;var l=this.fields;e&&l.groupBy&&(e=sf.lists.ListBase.groupDataSource(e,l.properties));for(var o=[],n=0;n<e.length;n++){var p=e[n],d=p.isHeader,u=this.createElement("li",{className:d?c.group:c.li,id:"option-add-"+n}),h=p instanceof Object?sf.base.getValue(l.text,p):p;if(d&&(u.innerText=h),this.itemTemplate&&!d){var f=sf.base.compile(this.itemTemplate);sf.base.append(f(p,null,null,this.itemTemplateId,this.isStringTemplate),u),this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1)}else d||u.appendChild(document.createTextNode(h));u.setAttribute("data-value",p instanceof Object?sf.base.getValue(l.value,p):p),u.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:u}),o.push(u),this.listData.push(p),this.updateActionCompleteData(u,p),this.trigger("beforeItemRender",{element:u,item:p})}if(0===r&&sf.base.isNullOrUndefined(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove(c.noData),this.list.appendChild(this.ulElement),this.liCollections=o,sf.base.append(o,this.ulElement),this.updateAddItemList(this.list,r);else{"listbox"===this.getModuleName()&&0===r&&(this.ulElement.innerHTML="");var m=[];for(n=0;n<e.length;n++){for(var g=this.ulElement.querySelectorAll(".e-list-group-item"),y=0;y<g.length;y++)m[y]=g[y].innerText;if(m.indexOf(o[n].innerText)>-1&&l.groupBy){for(y=0;y<g.length;y++)if(m[y]===o[n].innerText){this.ulElement.insertBefore(o[n+1],g[y+1]),n+=1;break}}else this.liCollections[i]?this.liCollections[i].parentNode.insertBefore(o[n],this.liCollections[i]):this.ulElement.appendChild(o[n]);var b=[].slice.call(this.liCollections);b.splice(i,0,o[n]),this.liCollections=b,i+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(a||0===t)&&this.updateSelection()},t.prototype.validationAttribute=function(e,t){var s=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",s),e.removeAttribute("name");for(var i=["required","aria-required","form"],r=0;r<i.length;r++)if(e.getAttribute(i[r])){var a=e.getAttribute(i[r]);t.setAttribute(i[r],a),e.removeAttribute(i[r])}},t.prototype.setZIndex=function(){},t.prototype.updateActionCompleteData=function(e,t){},t.prototype.updateAddItemList=function(e,t){},t.prototype.updateDataList=function(){},t.prototype.getDataByValue=function(e){if(!sf.base.isNullOrUndefined(this.listData)){var t=this.typeOfData(this.listData).typeof;if("string"===t||"number"===t||"boolean"===t)for(var s=0,i=this.listData;s<i.length;s++){var r=i[s];if(!sf.base.isNullOrUndefined(r)&&r===e)return r}else for(var a=0,l=this.listData;a<l.length;a++)if(r=l[a],!sf.base.isNullOrUndefined(r)&&sf.base.getValue(this.fields.value?this.fields.value:"value",r)===e)return r}return null},t.prototype.destroy=function(){document.body.contains(this.list)&&(sf.base.EventHandler.remove(this.list,"scroll",this.setFloatingHeader),sf.base.isNullOrUndefined(this.rippleFun)||this.rippleFun(),sf.base.detach(this.list)),e.prototype.destroy.call(this)},h([sf.base.Complex({text:null,value:null,iconCss:null,groupBy:null},f)],t.prototype,"fields",void 0),h([sf.base.Property(!1)],t.prototype,"enablePersistence",void 0),h([sf.base.Property(null)],t.prototype,"itemTemplate",void 0),h([sf.base.Property(null)],t.prototype,"groupTemplate",void 0),h([sf.base.Property("No records found")],t.prototype,"noRecordsTemplate",void 0),h([sf.base.Property("Request failed")],t.prototype,"actionFailureTemplate",void 0),h([sf.base.Property("None")],t.prototype,"sortOrder",void 0),h([sf.base.Property(!0)],t.prototype,"enabled",void 0),h([sf.base.Property([])],t.prototype,"dataSource",void 0),h([sf.base.Property(null)],t.prototype,"query",void 0),h([sf.base.Property("StartsWith")],t.prototype,"filterType",void 0),h([sf.base.Property(!0)],t.prototype,"ignoreCase",void 0),h([sf.base.Property(1e3)],t.prototype,"zIndex",void 0),h([sf.base.Property(!1)],t.prototype,"ignoreAccent",void 0),h([sf.base.Property()],t.prototype,"locale",void 0),h([sf.base.Event()],t.prototype,"actionBegin",void 0),h([sf.base.Event()],t.prototype,"actionComplete",void 0),h([sf.base.Event()],t.prototype,"actionFailure",void 0),h([sf.base.Event()],t.prototype,"select",void 0),h([sf.base.Event()],t.prototype,"dataBound",void 0),h([sf.base.Event()],t.prototype,"created",void 0),h([sf.base.Event()],t.prototype,"destroyed",void 0),t=h([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),a.incrementalSearch=function(e,t,s,i,r,a){var d;if(l+=String.fromCharCode(e),setTimeout((function(){l=""}),1e3),l=i?l.toLowerCase():l,p===r&&o===l){for(var u=0;u<n.length;u++)if(n[u].classList.contains("e-active")){d=u;break}return n[d+=1]}var h=t,f=l.length,c=void 0;u=s=s?s+1:0,n=[];do{u===h.length&&(u=-1),c=h[d=-1===u?0:u],(a?i?c.textContent.trim().toLowerCase():c.textContent.trim():i?c.innerText.toLowerCase():c.innerText).substr(0,f)===l&&n.push(h[d]),u++}while(u!==s);return o=l,p=r,n[0]},a.Search=function(e,t,s,i){var r=t;i=null==i||i;var a={item:null,index:null};if(e&&e.length){for(var l=e.length,o=i?e.toLocaleLowerCase():e,n=0,p=r;n<p.length;n++){var d=p[n],u=(i?d.textContent.toLocaleLowerCase():d.textContent).replace(/^\s+|\s+$/g,"");if("Equal"===s&&u===o||"StartsWith"===s&&u.substr(0,l)===o)return a.item=d,a.index=n,{item:d,index:n}}return a}return a},a.highlightSearch=function(e,t,s,i,r){if(""!==t){var a=s?"gim":"gm";t=/^[a-zA-Z0-9- ]*$/.test(t)?t:t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),function e(t,s,i){for(var r=0;t.childNodes&&r<t.childNodes.length;r++){if(3===t.childNodes[r].nodeType&&""!==t.childNodes[r].textContent.trim()){t=i&&t.classList.contains("e-highlight")?t.parentElement:t,i&&t.getAttribute("data-value")?t.innerHTML=t.getAttribute("data-value").replace(s,'<span class="e-highlight">$1</span>'):t.innerHTML=t.innerHTML.replace(s,'<span class="e-highlight">$1</span>');break}e(t.childNodes[r],s,i)}}(e,new RegExp("StartsWith"===i?"^("+t+")":"EndsWith"===i?"("+t+")$":"("+t+")",a),r)}},a.revertHighlightSearch=function(e){for(var t=e.querySelectorAll(".e-highlight"),s=t.length-1;s>=0;s--){var i=t[s].parentNode,r=document.createTextNode(t[s].textContent);i.replaceChild(r,t[s])}},a.FieldSettings=f,a.dropDownBaseClasses=c,a.DropDownBase=m,a))}}]);